------------------------------------------------------------------------
r170138 | spop | 2012-12-14 00:52:41 +0800 (Fri, 14 Dec 2012) | 1 line

isl: detect vector parallelism
------------------------------------------------------------------------
r170102 | grosser | 2012-12-13 14:24:06 +0800 (Thu, 13 Dec 2012) | 3 lines

isl: Detect openmp parallelism

Based on code written by Riyadh Baghdadi.
------------------------------------------------------------------------
r169487 | andyg | 2012-12-06 15:59:18 +0800 (Thu, 06 Dec 2012) | 1 line

Integrate polly test-suite into an llvm "make check-all" if built as part of the whole using cmake.
------------------------------------------------------------------------
r169313 | grosser | 2012-12-05 05:54:37 +0800 (Wed, 05 Dec 2012) | 3 lines

User isl sha commit id instead of the git tag

Apperently the git tag causes trouble in some scripts.
------------------------------------------------------------------------
r169161 | spop | 2012-12-04 05:34:09 +0800 (Tue, 04 Dec 2012) | 1 line

adapt cloog codegen testcases to isl
------------------------------------------------------------------------
r169160 | spop | 2012-12-04 05:33:55 +0800 (Tue, 04 Dec 2012) | 1 line

use -polly-ast instead of -polly-cloog
------------------------------------------------------------------------
r169159 | spop | 2012-12-04 05:33:40 +0800 (Tue, 04 Dec 2012) | 1 line

execute cloog specific testcases only with CLOOG_FOUND
------------------------------------------------------------------------
r169150 | grosser | 2012-12-04 04:47:57 +0800 (Tue, 04 Dec 2012) | 3 lines

Update CLooG

This cloog versions passes all tests with isl 0.11.
------------------------------------------------------------------------
r169127 | grosser | 2012-12-03 22:44:14 +0800 (Mon, 03 Dec 2012) | 4 lines

Use isl 0.11

We now switch to the newly released isl 0.11. This adds a couple of bug fixes
on top of the recent update.
------------------------------------------------------------------------
r169100 | grosser | 2012-12-02 05:51:10 +0800 (Sun, 02 Dec 2012) | 17 lines

Update the recommended isl version

Recent changes in isl:

- Allow analysis of loops during code generation

This simplifies the detection of parallel loops.

- Simplify the way costumized ast printers are defined

This enables us to highlight parallel / vector loops in our debug output.

- Compile time improvements for codegen contexts that include parameters

- Various bug fixes

This update also gets us in sync for the isl 0.11 release.
------------------------------------------------------------------------
r168966 | grosser | 2012-11-30 09:05:05 +0800 (Fri, 30 Nov 2012) | 9 lines

Remove unneeded preservation and restore of ValueMap and ClastVars in GPGPU code
generation.

We don't use the exact same way to build loop body for GPGPU codegen as openmp
codegen and other transformations do currently, in which cases 'createLoop'
function is called recursively. GPGPU codegen may fail due to improper restore
of ValueMap and ClastVars .

Contributed by:  Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r168964 | grosser | 2012-11-30 08:39:49 +0800 (Fri, 30 Nov 2012) | 3 lines

Add an additional input argument according to chanages of function polly::createLoop.

Contributed-by:  Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r168903 | grosser | 2012-11-30 01:34:50 +0800 (Fri, 30 Nov 2012) | 3 lines

Update to Polly for LLVM r165262 which changes TargetData to Datalayout.

Contributed by: Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r168791 | patha | 2012-11-28 21:30:31 +0800 (Wed, 28 Nov 2012) | 4 lines

Fix tests with broken datalayout strings.

Buildbot failure at r168785.

------------------------------------------------------------------------
r168780 | grosser | 2012-11-28 18:12:21 +0800 (Wed, 28 Nov 2012) | 6 lines

cmake: Fix installation of include files

Install the configured Config/config.h file, rather than the
Config/config.h.cmake and Config/Config.h.in source files.

Contributed-by: Richard Membarth <richard.membarth@informatik.uni-erlangen.de>
------------------------------------------------------------------------
r168724 | spop | 2012-11-28 05:15:15 +0800 (Wed, 28 Nov 2012) | 1 line

do not execute the OpenMP tests when cloog is not found
------------------------------------------------------------------------
r168714 | spop | 2012-11-28 02:50:41 +0800 (Wed, 28 Nov 2012) | 1 line

make IslAstInfo::printScop compatible with CloogInfo::printScop
------------------------------------------------------------------------
r168628 | spop | 2012-11-27 07:03:41 +0800 (Tue, 27 Nov 2012) | 1 line

do not require cloog from configure
------------------------------------------------------------------------
r168624 | spop | 2012-11-27 06:16:19 +0800 (Tue, 27 Nov 2012) | 5 lines

fix typo

Caught while compiling polly without cloog:

../tools/polly/lib/RegisterPasses.cpp:77: error: use of enum 'CodegenChoice' without previous declaration
------------------------------------------------------------------------
r168623 | spop | 2012-11-27 06:16:17 +0800 (Tue, 27 Nov 2012) | 6 lines

remove dependence on CLOOG_FOUND for PollyVectorizerChoice

When polly was configured with cmake without cloog, compilation stopped with:

../tools/polly/lib/CodeGen/BlockGenerators.cpp:662: error: 'PollyVectorizerChoice' was not declared in this scope
../tools/polly/lib/CodeGen/BlockGenerators.cpp:662: error: 'VECTORIZER_FIRST_NEED_GROUPED_UNROLL' was not declared in this scope
------------------------------------------------------------------------
r168621 | spop | 2012-11-27 06:07:30 +0800 (Tue, 27 Nov 2012) | 1 line

remove dead code
------------------------------------------------------------------------
r168620 | spop | 2012-11-27 06:07:27 +0800 (Tue, 27 Nov 2012) | 1 line

remove unused flag
------------------------------------------------------------------------
r168311 | grosser | 2012-11-19 20:26:25 +0800 (Mon, 19 Nov 2012) | 1 line

Make polly -Wdocumentation clean
------------------------------------------------------------------------
r168279 | spop | 2012-11-18 12:34:31 +0800 (Sun, 18 Nov 2012) | 3 lines

utils: use rmdir instead of rm to remove empty dirs

as suggested by Sven Verdoolaege <skimo-polly@kotnet.org>
------------------------------------------------------------------------
r168252 | spop | 2012-11-17 12:57:41 +0800 (Sat, 17 Nov 2012) | 4 lines

utils: remove the isl directory after cloning cloog

This fixes my previous commit, thanks to "Dmitry N. Mikushin"
<maemarcus@gmail.com>
------------------------------------------------------------------------
r168250 | spop | 2012-11-17 11:43:48 +0800 (Sat, 17 Nov 2012) | 3 lines

utils: remove existing cloog and isl dirs before git cloning

Patch adapted from "Dmitry N. Mikushin" <maemarcus@gmail.com>.
------------------------------------------------------------------------
r168090 | spop | 2012-11-16 05:20:22 +0800 (Fri, 16 Nov 2012) | 5 lines

autoconf: isl depends on gmp include files

When libgmp header files are not installed in the default /usr/include location,
configure used to fail to find the gmp headers when testing for isl/ast.h.  This
patch adds the gmp include path to the compiler flags before testing for ISL.
------------------------------------------------------------------------
r167923 | grosser | 2012-11-14 16:25:52 +0800 (Wed, 14 Nov 2012) | 3 lines

test: LLVM supports now vectors of arbitrary pointers

This allows Polly to vectorize more code. Fix the relevant test cases.
------------------------------------------------------------------------
r167372 | grosser | 2012-11-05 00:56:20 +0800 (Mon, 05 Nov 2012) | 4 lines

Tests: Pipe test files into 'opt'

Use 'opt < %s' instead of just 'opt %s' to ensure that no temporary files are
created.
------------------------------------------------------------------------
r167284 | grosser | 2012-11-02 14:09:20 +0800 (Fri, 02 Nov 2012) | 1 line

Tests: remove ModuleID lines
------------------------------------------------------------------------
r167283 | grosser | 2012-11-02 14:08:39 +0800 (Fri, 02 Nov 2012) | 1 line

Tests: move content of .c files in .ll
------------------------------------------------------------------------
r167255 | grosser | 2012-11-02 05:44:59 +0800 (Fri, 02 Nov 2012) | 5 lines

Remove runtime tests from polly test suite

Similar to LLVM we now follow the policy of only having LLVM-IR level tests in
the Polly test suite. Testing for miscompilation of larger programs should be
done with the llvm test suite.
------------------------------------------------------------------------
r167251 | grosser | 2012-11-02 05:28:32 +0800 (Fri, 02 Nov 2012) | 6 lines

Dependences: Add support to calculate memory based dependences

Instead of calculating exact value (flow) dependences, it is also possible to
calculate memory based dependences. Sometimes memory based dependences are a lot
easier to calculate. To evaluate the benefits, we add an option to calculate
memory based dependences (use -polly-value-dependences=false).
------------------------------------------------------------------------
r167235 | grosser | 2012-11-02 00:45:20 +0800 (Fri, 02 Nov 2012) | 9 lines

ScopDetection: Print line numbers of detected scops

If the flags '-polly-report -g' are given, we print file name and line numbers
for the beginning and end of all detected scops.

  linear-algebra/kernels/gemm/gemm.c:23: Scop start
  linear-algebra/kernels/gemm/gemm.c:42: Scop end
  linear-algebra/kernels/gemm/gemm.c:77: Scop start
  linear-algebra/kernels/gemm/gemm.c:82: Scop end
------------------------------------------------------------------------
r167234 | grosser | 2012-11-02 00:45:18 +0800 (Fri, 02 Nov 2012) | 1 line

Revert multiple adress space changes in Polly
------------------------------------------------------------------------
r167215 | grosser | 2012-11-01 13:34:55 +0800 (Thu, 01 Nov 2012) | 14 lines

Codegen: Selectively copy in array addresses for OpenMP code

The detection of values that need to be copied in to the generated OpenMP
subfunction also detects the array base addresses needed in the SCoP. Hence, it
is not necessary to unconditionally copy all the base addresses to the generated
function.

Test cases are modified to reflect this change. Arrays which are global
variables do not occur in the struct passed to the subfunction anymore. A test
case for base address copy-in is added in copy_in_array.{c,ll}.

Committed with slight modifications

Contributed by:  Armin Groesslinger <armin.groesslinger@uni-passau.de>
------------------------------------------------------------------------
r167214 | grosser | 2012-11-01 13:34:48 +0800 (Thu, 01 Nov 2012) | 10 lines

CodeGen: Add scop-parameters to the OpenMP context

In addition to the arrays and clast variables a SCoP statement may also refer to
values defined before the SCoP or to function arguments. Detect these values and
add them to the set of values passed to the function generated for OpenMP
parallel execution of a clast.

Committed with additional test cases and some refactoring.

Contributed by:  Armin Groesslinger  <armin.groesslinger@uni-passau.de>
------------------------------------------------------------------------
r167213 | grosser | 2012-11-01 13:34:35 +0800 (Thu, 01 Nov 2012) | 9 lines

Codegen: Copy and restore the ValueMap and ClastVars explicitly

When generating OpenMP or GPGPU code the original ValueMap and ClastVars must be
kept. We already recovered the original ClastVars by reverting the changes, but
we did not keep the content of the ValueMap. This patch keeps now an explicit
copy of both maps and restores them after generating OpenMP or GPGPU code.

This is an adapted version of a patch contributed by:
Armin Groesslinger  <armin.groesslinger@uni-passau.de>
------------------------------------------------------------------------
r166670 | chandlerc | 2012-10-25 16:43:18 +0800 (Thu, 25 Oct 2012) | 4 lines

Another speculative commit to try to fix Polly's build. This is more delta than
I like to make w/o being able to build, but I don't have the dependencies to
build and test polly. I'll revert if the build bots don't like it.

------------------------------------------------------------------------
r166668 | chandlerc | 2012-10-25 15:42:03 +0800 (Thu, 25 Oct 2012) | 2 lines

Another fix for a build-bot reported API mismatch.

------------------------------------------------------------------------
r166666 | chandlerc | 2012-10-25 15:25:56 +0800 (Thu, 25 Oct 2012) | 2 lines

Try to revive the Polly builders after this LLVM API change.

------------------------------------------------------------------------
r166403 | grosser | 2012-10-22 05:48:21 +0800 (Mon, 22 Oct 2012) | 5 lines

autoconf/cmake: Always require isl code generation.

This change ensures that isl is only detected if it includes code generation
support. This allows us to remove a lot of conditional compilation and also
avoids missing test cases in case the feature is not available.
------------------------------------------------------------------------
r166402 | grosser | 2012-10-22 05:08:29 +0800 (Mon, 22 Oct 2012) | 12 lines

cmake: Use suffix for shared modules instead of the one for shared libraries

On Linux there is no difference between shared modules and shared libaries, both
are '.so' files. However, on darwin only shared modules are '.so' files. Shared
libraries have the '.dynlib' suffix.

Fix test cases on darwin by expecting a shared module suffix for Polly instead
of a shared library suffix.

This fixes PR14135

Reported by:  Jack Howarth  <howarth@bromo.med.uc.edu>
------------------------------------------------------------------------
r166397 | grosser | 2012-10-22 02:31:27 +0800 (Mon, 22 Oct 2012) | 1 line

RegisterPasses: Remove unreachable default case in switch
------------------------------------------------------------------------
r166396 | grosser | 2012-10-22 01:33:00 +0800 (Mon, 22 Oct 2012) | 3 lines

www: Correct command line that loads polly into dragonegg

Reported by:  Jack Howarth  <howarth@bromo.med.uc.edu>
------------------------------------------------------------------------
r166394 | grosser | 2012-10-21 23:51:49 +0800 (Sun, 21 Oct 2012) | 3 lines

Introduce a separate file for CMake macros

Contributed by:  Sameer Sahasrabuddhe <sameer.sahasrabuddhe@amd.com>
------------------------------------------------------------------------
r166021 | grosser | 2012-10-16 15:29:19 +0800 (Tue, 16 Oct 2012) | 7 lines

isl scheduler: Do not fail when returning an empty band list

The bug was within isl. To fix it, we simply update the isl version that
is used by Polly. We still have some changes within Polly to be able to
write a proper test case.

Reported-by: Sameer Sahasrabuddhe <Sameer.Sahasrabuddhe@amd.com>
------------------------------------------------------------------------
r166020 | grosser | 2012-10-16 15:29:13 +0800 (Tue, 16 Oct 2012) | 5 lines

isl-codegen: Support '<' and '>'

Previously isl always generated '<=' or '>='. However, in many cases '<' or '>'
leads to simpler code. This commit updates isl and adds the relevant code
generation support to Polly.
------------------------------------------------------------------------
r165789 | grosser | 2012-10-12 15:44:38 +0800 (Fri, 12 Oct 2012) | 1 line

www: Clarify that GMP is LGPL licensed
------------------------------------------------------------------------
r165481 | sameerds | 2012-10-09 12:59:42 +0800 (Tue, 09 Oct 2012) | 2 lines

Trivial change to the README, mainly to test commit access.

------------------------------------------------------------------------
r165408 | mvillmow | 2012-10-09 01:26:19 +0800 (Tue, 09 Oct 2012) | 1 line

Move TargetData to DataLayout to fix build breakage caused by LLVM r16540
------------------------------------------------------------------------
r165387 | grosser | 2012-10-08 16:56:52 +0800 (Mon, 08 Oct 2012) | 3 lines

Rename TargetData -> DataLayout

Contributed by: Sameer Sahasrabuddhe <sameer.sahasrabuddhe@amd.com>
------------------------------------------------------------------------
r165379 | grosser | 2012-10-08 01:43:23 +0800 (Mon, 08 Oct 2012) | 10 lines

ScopLib: Support negated access functions.

Scoplib only supports access functions, but not the more generic
access relations. This commit now also supports access functions
that where not directly expresses as A[sub] with sub = i + 5b,
but with A[sub] with -sub = -i + (-5b).

Test case to come.

Contributed by: Dustin Feld <d3.feld@gmail.com>
------------------------------------------------------------------------
r165378 | grosser | 2012-10-08 01:43:18 +0800 (Mon, 08 Oct 2012) | 1 line

Update the 'News' section on the Polly page
------------------------------------------------------------------------
r165037 | grosser | 2012-10-03 03:50:43 +0800 (Wed, 03 Oct 2012) | 6 lines

Add a new isl based code generation

This pass implements a new code generator that uses the code generation
algorithm included in isl.

For the moment the new code generation is limited to sequential code.
------------------------------------------------------------------------
r165036 | grosser | 2012-10-03 03:50:38 +0800 (Wed, 03 Oct 2012) | 1 line

Add an ast pretty printer pass based on the isl code generator
------------------------------------------------------------------------
r165035 | grosser | 2012-10-03 03:50:30 +0800 (Wed, 03 Oct 2012) | 1 line

Update isl to get the new code generation
------------------------------------------------------------------------
r165034 | grosser | 2012-10-03 03:50:22 +0800 (Wed, 03 Oct 2012) | 1 line

Detect the isl code generation feature correctly
------------------------------------------------------------------------
r164376 | grosser | 2012-09-22 00:24:13 +0800 (Sat, 22 Sep 2012) | 4 lines

Bailout if libpluto finds no schedule

Older versions of libpluto crashed, if no schedule was found. Recent
versions return NULL. We detect this and keep the original schedule.
------------------------------------------------------------------------
r163619 | grosser | 2012-09-11 22:03:19 +0800 (Tue, 11 Sep 2012) | 6 lines

Add test cases for multi-dimensional variable lengths arrays

At the moment we can handle such arrays only by conservatively assuming that
each access to such an array may touch any element in the array. It would be
great if we could improve Polly/LLVM at some point, such that we can
recover the multi-dimensionality of the accesses.
------------------------------------------------------------------------
r163618 | grosser | 2012-09-11 21:50:21 +0800 (Tue, 11 Sep 2012) | 5 lines

ScopInfo: Align parameters when using -polly-allow-nonaffine

This ensures that the isl sets/maps we operate on have the same parameter
dimensions. Operations on objects with different parameter dimensions are not
allow and trigger assertions.
------------------------------------------------------------------------
r163472 | grosser | 2012-09-08 22:00:37 +0800 (Sat, 08 Sep 2012) | 1 line

SCEVValidator: Add debug output that gives the reason for invalid expressions
------------------------------------------------------------------------
r163471 | grosser | 2012-09-08 22:00:32 +0800 (Sat, 08 Sep 2012) | 3 lines

Remove dead code

This code has been replaced by the SCEVValidator a while ago.
------------------------------------------------------------------------
r163466 | grosser | 2012-09-08 16:31:55 +0800 (Sat, 08 Sep 2012) | 3 lines

ScopGraphPrinter: Escape error message

Otherwise a '"' in the error message, yields an invalid .dot file.
------------------------------------------------------------------------
r163130 | grosser | 2012-09-04 16:19:12 +0800 (Tue, 04 Sep 2012) | 7 lines

Add dependency to intrinsics_gen

The IndVarSimplify pass in Polly uses the intrinsics header. We need to ensure
that the header is generated, before we use it. This patch fixes the problem
for the cmake build (it did not show up in the autoconf one).

Contributed by:   Sameer Sahasrabuddhe  <sameer.sahasrabuddhe@amd.com>
------------------------------------------------------------------------
r163108 | grosser | 2012-09-03 15:42:40 +0800 (Mon, 03 Sep 2012) | 5 lines

Update isl to a newer version

This fixes some undefined behavior in isl.

Reported by:  Sameer Sahasrabuddhe  <sameer.sahasrabuddhe@amd.com>
------------------------------------------------------------------------
r162901 | grosser | 2012-08-30 19:49:38 +0800 (Thu, 30 Aug 2012) | 10 lines

Pocc: Fix some bugs in the PoCC optimizer pass

This includes:
  - The isl_id of the domain of the scattering must be copied from the original
    domain
  - Remove outdated references to a 'FinalRead' statement
  - Print of the Pocc output, if -debug is provided.
  - Add line breaks to some error messages.

Reported and Debugged by:  Dustin Feld  <d3.feld@gmail.com>
------------------------------------------------------------------------
r162900 | grosser | 2012-08-30 19:49:31 +0800 (Thu, 30 Aug 2012) | 1 line

Pluto: Print pluto input in debugging mode
------------------------------------------------------------------------
r162662 | grosser | 2012-08-27 16:44:15 +0800 (Mon, 27 Aug 2012) | 4 lines

Dependences: Print dependences in -analyze output

The dependency printing was accidentally removed in during a previous
restructuring.
------------------------------------------------------------------------
r162555 | grosser | 2012-08-24 21:56:56 +0800 (Fri, 24 Aug 2012) | 1 line

PoCC: Simplify condition
------------------------------------------------------------------------
r162554 | grosser | 2012-08-24 21:54:40 +0800 (Fri, 24 Aug 2012) | 1 line

Sort includes
------------------------------------------------------------------------
r162553 | grosser | 2012-08-24 21:54:36 +0800 (Fri, 24 Aug 2012) | 1 line

PoCC: Adapt to earlier vectorizer changes
------------------------------------------------------------------------
r162275 | grosser | 2012-08-21 20:29:10 +0800 (Tue, 21 Aug 2012) | 7 lines

autoconf: Only define GPGPU_CODEGEN, if that feature is requested

Before we defined GPGPU_CODEGEN to '0', which does not disable the relevant code
as we just check if that value is defined at all. We now follow the cmake
approach and only define GPGPU_CODEGEN, if the feature should be enabled.

Reported by: Sebastian Pop <spop@codeaurora.org>
------------------------------------------------------------------------
r161930 | grosser | 2012-08-15 13:50:24 +0800 (Wed, 15 Aug 2012) | 1 line

Remove executable bits from html files
------------------------------------------------------------------------
r161928 | grosser | 2012-08-15 13:02:25 +0800 (Wed, 15 Aug 2012) | 9 lines

www documentation for using Polly with dragonegg.

Added a file that explains how to load Polly in dragonegg.
Also fixed a typo in the document for clang.

Committed with a typo fix and a change to make this website available from
the documentation section.

Contributed by: Sameer Sahasrabuddhe  <Sameer.Sahasrabuddhe@amd.com>
------------------------------------------------------------------------
r161239 | grosser | 2012-08-03 20:50:07 +0800 (Fri, 03 Aug 2012) | 19 lines

Add preliminary implementation for GPGPU code generation.

Translate the selected parallel loop body into a ptx string and run it with the
cuda driver API. We limit this preliminary implementation to target the
following special test cases:

  - Support only 2-dimensional parallel loops with or without only one innermost
    non-parallel loop.
  - Support write memory access to only one array in a SCoP.

The patch was committed with smaller changes to the build system:

There is now a flag to enable gpu code generation explictly. This was required
as we need the llvm.codegen() patch applied on the llvm sources, to compile this
feature correctly. Also, enabling gpu code generation does not require cuda.
This requirement was removed to allow 'make polly-test' runs, even without an
installed cuda runtime.

Contributed by:  Yabin Hu  <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r161235 | grosser | 2012-08-03 16:11:24 +0800 (Fri, 03 Aug 2012) | 6 lines

Remove 'using namespace llvm' from header file

This fixes a conflict between polly::createIndVarSimplifyPass() and
llvm::createIndVarSimplifyPass(), which causes problems on windows.

Reported by:  Michael Kruse  <MichaelKruse@meinersbur.de
------------------------------------------------------------------------
r161234 | grosser | 2012-08-03 15:12:07 +0800 (Fri, 03 Aug 2012) | 7 lines

cmake: Fix building of Polly on Apple system

The Apple linker fails by default, if some function calls can not be resolved at
link time. However, all functions that are part of LLVM itself will not be
linked into Polly, but will be provided by the compiler that Polly is loaded
into.  Hence, during linking we need to ignore failures due to unresolved
function calls.
------------------------------------------------------------------------
r161174 | grosser | 2012-08-02 21:34:58 +0800 (Thu, 02 Aug 2012) | 3 lines

Remove leftover definitions

Contributed by: Michael Kruse  <MichaelKruse@meinersbur.de>
------------------------------------------------------------------------
r161160 | grosser | 2012-08-02 16:16:40 +0800 (Thu, 02 Aug 2012) | 3 lines

Update llvm.codegen() patch for CodeGen.cpp changes in r159694.

Contributed by:  Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r161158 | grosser | 2012-08-02 15:47:37 +0800 (Thu, 02 Aug 2012) | 1 line

Add missing dependency to cmake system
------------------------------------------------------------------------
r161157 | grosser | 2012-08-02 15:47:26 +0800 (Thu, 02 Aug 2012) | 1 line

Add support for libpluto as the scheduling optimizer.
------------------------------------------------------------------------
r161105 | ether | 2012-08-01 16:46:11 +0800 (Wed, 01 Aug 2012) | 6 lines

IndependentBLocks: Do not visit the same instruction twice when moving the
  operand tree.

This patch fix Bug 13491, and the original "FIXME" in IndependentBlocks.cpp.

Patched by Kevin Fan<kevin.fan@gmail.com>.
------------------------------------------------------------------------
r160677 | grosser | 2012-07-25 00:58:57 +0800 (Wed, 25 Jul 2012) | 4 lines

Create a new directory before running the polly script

Otherwise the script spams the home directory and, in case there are folders
of previous attempts lying around, it may fail in some unexpected way.
------------------------------------------------------------------------
r160261 | grosser | 2012-07-16 18:57:32 +0800 (Mon, 16 Jul 2012) | 9 lines

Allow cast instructions within scops

Cast instruction do not have side effects and can consequently be part of a
scop. We special cased them earlier, as they may be problematic within array
subscripts or loop bounds. However, the scalar evolution validator already
checks for them such that there is no need to also check the instructions within
the basic blocks.  Checking them is actually overly conservative as the precence
of casts may invalidate a scop, even though scalar evolution is not influenced
by it.
------------------------------------------------------------------------
r160165 | grosser | 2012-07-13 15:44:56 +0800 (Fri, 13 Jul 2012) | 9 lines

Revert "Add preliminary implementation for GPGPU code generation."

I did not take into account, that this patch fails to compile without the
llvm.codegen patch applied. This breaks buildbots.

I revert this until we found a solution to commit this without buildbots
complaining.

This reverts commit cb43ab80e94434e780a66be3b9a6ad466822fe33.
------------------------------------------------------------------------
r160164 | grosser | 2012-07-13 15:21:00 +0800 (Fri, 13 Jul 2012) | 10 lines

Add preliminary implementation for GPGPU code generation.

Translate the selected parallel loop body into a ptx string and run it
with cuda driver API. We limit this preliminary implementation to
target the following special test cases:
  - Support only 2-dimensional parallel loops with or without only one
    innermost non-parallel loop.
  - Support write memory access to only one array in a SCoP.

Contributed by:  Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r159815 | grosser | 2012-07-06 18:40:15 +0800 (Fri, 06 Jul 2012) | 3 lines

Update libGPURuntime to be dual licensed under MIT and UIUC license.

Contributed by: Yabin Hu  <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r159808 | ether | 2012-07-06 14:47:03 +0800 (Fri, 06 Jul 2012) | 2 lines

Add an Instruction member to MemoryAccess Class.
  Patched by TangKK <dengjunqi06323011@hotmail.com>.
------------------------------------------------------------------------
r159735 | ether | 2012-07-05 16:55:31 +0800 (Thu, 05 Jul 2012) | 2 lines

Add stringFromIslObj support for various isl_objs.
  Patched by JunQi<dengjunqi06323011@hotmail.com>.
------------------------------------------------------------------------
r159734 | ether | 2012-07-05 16:42:39 +0800 (Thu, 05 Jul 2012) | 1 line

Refactor: Use generic internal function template in GICHelper.cpp to avoid duplication.
------------------------------------------------------------------------
r159725 | grosser | 2012-07-05 05:45:03 +0800 (Thu, 05 Jul 2012) | 3 lines

Replace CUDA data types with Polly's GPGPU data types.

Contributed by:  Yabin Hu  <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r159650 | grosser | 2012-07-03 16:18:34 +0800 (Tue, 03 Jul 2012) | 1 line

codegen.intrinsic: Update testcase to work with NVPTX backend
------------------------------------------------------------------------
r159649 | grosser | 2012-07-03 16:18:31 +0800 (Tue, 03 Jul 2012) | 3 lines

Update to Polly for LLVM r159614 which changes Passes.cpp.

Contributed by: Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r159507 | grosser | 2012-07-01 21:47:50 +0800 (Sun, 01 Jul 2012) | 3 lines

Update to Polly for LLVM r159383 which changes SelectionDAGBuilder.cpp.

Contributed by: Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r159423 | chandlerc | 2012-06-29 20:39:49 +0800 (Fri, 29 Jun 2012) | 2 lines

Speculative update to Polly for LLVM r159421 which moved IRBuilder.h. 

------------------------------------------------------------------------
r158987 | grosser | 2012-06-22 18:59:36 +0800 (Fri, 22 Jun 2012) | 1 line

Add TempScop::isWrite() function.
------------------------------------------------------------------------
r158306 | grosser | 2012-06-11 18:25:12 +0800 (Mon, 11 Jun 2012) | 1 line

Add some tests for the independent blocks pass.
------------------------------------------------------------------------
r158304 | grosser | 2012-06-11 17:25:01 +0800 (Mon, 11 Jun 2012) | 3 lines

Add the runtime library for GPGPU code generation.

Contributed by: Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r158081 | grosser | 2012-06-07 00:33:15 +0800 (Thu, 07 Jun 2012) | 1 line

Fix some coding convention problems.
------------------------------------------------------------------------
r158064 | grosser | 2012-06-06 20:16:10 +0800 (Wed, 06 Jun 2012) | 5 lines

Detect the cuda library available.

We will use the cuda library for the upcoming automatic GPGPU code generation.

Contributed by: Yabin Hu  <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r158015 | grosser | 2012-06-06 03:31:08 +0800 (Wed, 06 Jun 2012) | 15 lines

CLooG: Do not take into account the context

CLooG and the CLooG based code generation does not yet correctly derive the
types of the expressions, but just uses i64 for everything. This is incorrect,
but works normally pretty well. However, the recent change of adding parameter
bounds to the context made CLooG generate expressions that contain a lot of very
large integers that possibly don't fit into an i64. This broke the code
generation for several benchmarks.

To get the CLooG based code generation working again, we just don't take into
account any constraints in the context. This brings us back to the theoretical
incorrect, but in practice generally correct code.

The next step will be the isl based code generation. Here we will derive
automatically correct types.
------------------------------------------------------------------------
r157690 | grosser | 2012-05-30 21:54:02 +0800 (Wed, 30 May 2012) | 1 line

www: Add GPGPU Code Generation Documentation.
------------------------------------------------------------------------
r157689 | grosser | 2012-05-30 21:53:57 +0800 (Wed, 30 May 2012) | 5 lines

Add llvm.codegen intrinsic patch file to polly/utils.

The "llvm.codegen" intrinsic patch is a patch to LLVM, which is used
to generate code for embedded LLVM-IR strings. In Polly, we use it
to generate ptx assembly text for GPGPU code generation.
------------------------------------------------------------------------
r157607 | grosser | 2012-05-29 17:29:44 +0800 (Tue, 29 May 2012) | 5 lines

ScopInfo: Store ScopStmt pointer in the domain

Store a pointer to each ScopStmt in the isl_id associated with the space of its
domain. This will later allow us to recover the statement during code
generation with isl.
------------------------------------------------------------------------
r157606 | grosser | 2012-05-29 17:11:59 +0800 (Tue, 29 May 2012) | 3 lines

Mark the increments of the generated induction variables 'NSW'

In general, all code that we produce is NSW.
------------------------------------------------------------------------
r157605 | grosser | 2012-05-29 17:11:54 +0800 (Tue, 29 May 2012) | 3 lines

Move executeScopConditionally() into its own file

We will reuse this function for the isl code generator.
------------------------------------------------------------------------
r157604 | grosser | 2012-05-29 17:11:46 +0800 (Tue, 29 May 2012) | 1 line

Move CLooG.h into include/polly/CodeGen/
------------------------------------------------------------------------
r157246 | grosser | 2012-05-22 18:47:31 +0800 (Tue, 22 May 2012) | 3 lines

ScheduleOptimizer: Simplify some code

We now use isl_map_equate, which makes the code a lot simpler.
------------------------------------------------------------------------
r157245 | grosser | 2012-05-22 18:47:27 +0800 (Tue, 22 May 2012) | 5 lines

ScopInfo: Add parameter bounds to context

Derive the maximal and minimal values of a parameter from the type it has. Add
this information to the scop context. This information is needed, to derive
optimal types during code generation.
------------------------------------------------------------------------
r157244 | grosser | 2012-05-22 18:47:21 +0800 (Tue, 22 May 2012) | 1 line

Replace some asserts with llvm_unreachable
------------------------------------------------------------------------
r157243 | grosser | 2012-05-22 18:47:17 +0800 (Tue, 22 May 2012) | 5 lines

ScopInfo: SCEVUnknowns are always parameters

There is no need for special code to handle SCEVUnknowns. SCEVUnkowns are always
parameters and will be handled by the generic parameter handling code in
visit().
------------------------------------------------------------------------
r157242 | grosser | 2012-05-22 16:46:07 +0800 (Tue, 22 May 2012) | 3 lines

Move isParallelFor into CodeGeneration

This removes another include of CLooG header files.
------------------------------------------------------------------------
r156326 | spop | 2012-05-08 05:27:11 +0800 (Tue, 08 May 2012) | 1 line

make registerPollyPreoptPasses static
------------------------------------------------------------------------
r156325 | spop | 2012-05-08 05:27:09 +0800 (Tue, 08 May 2012) | 1 line

make registerPollyPasses static, remove param
------------------------------------------------------------------------
r156306 | spop | 2012-05-08 00:35:11 +0800 (Tue, 08 May 2012) | 1 line

add some more missing ifdef CLOOG_FOUND
------------------------------------------------------------------------
r156305 | spop | 2012-05-08 00:20:07 +0800 (Tue, 08 May 2012) | 1 line

add a check for ISL codegen at configure time
------------------------------------------------------------------------
r156256 | ether | 2012-05-06 18:22:57 +0800 (Sun, 06 May 2012) | 1 line

WWW: Adapt the vectorize option change.
------------------------------------------------------------------------
r156255 | ether | 2012-05-06 18:22:43 +0800 (Sun, 06 May 2012) | 1 line

Regression tests: Adapt the vectorize option change.
------------------------------------------------------------------------
r156254 | ether | 2012-05-06 18:22:19 +0800 (Sun, 06 May 2012) | 1 line

Allow polly ask bb-vectorizer to vectorize the loop body.
------------------------------------------------------------------------
r156210 | spop | 2012-05-05 05:36:08 +0800 (Sat, 05 May 2012) | 1 line

fix typo
------------------------------------------------------------------------
r156207 | chandlerc | 2012-05-05 05:24:27 +0800 (Sat, 05 May 2012) | 2 lines

Try to fix the Polly build while I'm trying to get it to build at all locally.

------------------------------------------------------------------------
r156203 | chandlerc | 2012-05-05 04:57:29 +0800 (Sat, 05 May 2012) | 2 lines

Update Polly to match the LLVM interface change in r156196.

------------------------------------------------------------------------
r156199 | spop | 2012-05-05 04:30:03 +0800 (Sat, 05 May 2012) | 1 line

compile cloog code only when CLOOG_FOUND is set
------------------------------------------------------------------------
r156184 | spop | 2012-05-05 02:15:57 +0800 (Sat, 05 May 2012) | 1 line

move Cloog.cpp to CodeGen
------------------------------------------------------------------------
r156171 | grosser | 2012-05-04 20:11:01 +0800 (Fri, 04 May 2012) | 3 lines

Fix typo.

Reported by: Andreas Simbuerger
------------------------------------------------------------------------
r156170 | grosser | 2012-05-04 19:26:52 +0800 (Fri, 04 May 2012) | 1 line

ScopDection: Improve status message for non-affine memory accesses.
------------------------------------------------------------------------
r155863 | grosser | 2012-05-01 07:49:05 +0800 (Tue, 01 May 2012) | 3 lines

Remove unused function

Suggested by: Sebastian Pop
------------------------------------------------------------------------
r155717 | grosser | 2012-04-28 00:36:14 +0800 (Sat, 28 Apr 2012) | 7 lines

SCEV based code generation

This is an incomplete implementation of the SCEV based code generation.
When finished it will remove the need for -indvars -enable-iv-rewrite.

For the moment it is still disabled. Even though it passes 'make polly-test',
there are still loose ends especially in respect of OpenMP code generation.
------------------------------------------------------------------------
r155636 | ether | 2012-04-26 21:55:33 +0800 (Thu, 26 Apr 2012) | 2 lines

1. Add a header guard for RegisterPasses.h to prevent multiple inclusion.
 2. Include the helper function and the helper class in the RegisterPasses.h into the polly namespace.
------------------------------------------------------------------------
r155634 | grosser | 2012-04-26 21:43:03 +0800 (Thu, 26 Apr 2012) | 1 line

Further simplify parallelism test
------------------------------------------------------------------------
r155548 | grosser | 2012-04-25 21:22:43 +0800 (Wed, 25 Apr 2012) | 1 line

ScheduleOptimizer: Move functions into class
------------------------------------------------------------------------
r155547 | ether | 2012-04-25 21:18:28 +0800 (Wed, 25 Apr 2012) | 1 line

Refactor: Move the code generation related header files to include/polly/CodeGen.
------------------------------------------------------------------------
r155546 | ether | 2012-04-25 21:16:49 +0800 (Wed, 25 Apr 2012) | 2 lines

Refactor: Move the declaration of the BlockGenerator/VectorBlockGenerator
  to standalone header and source files.
------------------------------------------------------------------------
r155544 | ether | 2012-04-25 17:34:33 +0800 (Wed, 25 Apr 2012) | 3 lines

ScopStmt: Provide a function to allow users look up the corresponding
  memory access of a particular instruction, the function will return
  null if no such memory access.
------------------------------------------------------------------------
r155539 | ether | 2012-04-25 16:01:38 +0800 (Wed, 25 Apr 2012) | 2 lines

Minor change: Replace convertInt in ScopInfo.cpp by utostr_32, which is
 defined in StringExtras.h.
------------------------------------------------------------------------
r155446 | grosser | 2012-04-25 00:12:34 +0800 (Wed, 25 Apr 2012) | 4 lines

Simplify import/export command line flags.

Instead of -polly-run-import-jscop and -polly-run-export-jscop, we just use
-polly-import and -polly-export.
------------------------------------------------------------------------
r155445 | grosser | 2012-04-25 00:12:30 +0800 (Wed, 25 Apr 2012) | 4 lines

Unify the optimizer selection.

We now support -polly-optimizer=isl, -polly-optimizer=pocc and
-polly-optimizer=none. The option -polly-no-optimizer is gone.
------------------------------------------------------------------------
r155438 | grosser | 2012-04-24 19:08:07 +0800 (Tue, 24 Apr 2012) | 1 line

Make vector tests less sensible to codegen changes
------------------------------------------------------------------------
r155349 | ether | 2012-04-23 21:03:56 +0800 (Mon, 23 Apr 2012) | 2 lines

Refactor: Pass the argument 'IRBuilder' and 'AfterBlock' of function 'createLoop' by
 reference, so that we do not need to type an extra '&' operator when calling the function.
------------------------------------------------------------------------
r155348 | ether | 2012-04-23 21:03:43 +0800 (Mon, 23 Apr 2012) | 2 lines

1. Add a header guard for LoopGenerators.h to prevent multiple inclusion.
2. Include the helper function and the helper class in the LoopGenerator.h into the polly namespace.
------------------------------------------------------------------------
r155135 | grosser | 2012-04-20 00:38:16 +0800 (Fri, 20 Apr 2012) | 4 lines

Dependences: Rework parallelism check

After working and explaining this function to someone, I realized it could be
simplified and better documented.
------------------------------------------------------------------------
r154952 | grosser | 2012-04-18 05:38:20 +0800 (Wed, 18 Apr 2012) | 1 line

www: Update matmul example slightly.
------------------------------------------------------------------------
r154808 | grosser | 2012-04-16 19:06:06 +0800 (Mon, 16 Apr 2012) | 1 line

ScheduleOpt: Fix crash with -enable-polly-vector
------------------------------------------------------------------------
r154586 | grosser | 2012-04-12 18:46:55 +0800 (Thu, 12 Apr 2012) | 5 lines

CodeGen: Generate scalar code if vector instructions cannot be generated

This fixes two crashes that appeared in case of:
  - A load of a non vectorizable type (e.g. float**)
  - An instruction that is not vectorizable (e.g. call)
------------------------------------------------------------------------
r154487 | ether | 2012-04-11 15:43:24 +0800 (Wed, 11 Apr 2012) | 3 lines

Revert "Make the "all" target depend on polly-test, so that users can run regression"

This reverts commit 97bd8d50881000c11b65b0e033996ec5f57bcd15.
------------------------------------------------------------------------
r154486 | ether | 2012-04-11 15:43:13 +0800 (Wed, 11 Apr 2012) | 3 lines

Revert "Fix a bug introduced by r153739: We are not able to provide the correct"

This reverts commit 2c6bdbf972ac966498489d30a33bfd252df9107d.
------------------------------------------------------------------------
r154415 | grosser | 2012-04-11 02:12:19 +0800 (Wed, 11 Apr 2012) | 3 lines

Fix typo

Suggested by: Sebastian Pop  <sebpop@gmail.com>
------------------------------------------------------------------------
r154337 | grosser | 2012-04-10 03:46:05 +0800 (Tue, 10 Apr 2012) | 3 lines

Fix typos.

Pointed out by: Sebastian Pop  <sebpop@gmail.com>
------------------------------------------------------------------------
r154260 | ether | 2012-04-07 23:14:28 +0800 (Sat, 07 Apr 2012) | 2 lines

Rewritten expandRegion to clarify the intention and improve
  performance, patched by Johannes Doerfert <johannes@jdoerfert.de>.
------------------------------------------------------------------------
r154259 | ether | 2012-04-07 20:29:27 +0800 (Sat, 07 Apr 2012) | 1 line

ScopDetection: Add some comments to function "expandRegion".
------------------------------------------------------------------------
r154258 | ether | 2012-04-07 20:29:17 +0800 (Sat, 07 Apr 2012) | 2 lines

Speed up SCoP detection time by checking the exit of the region first,
  patched by Johannes Doerfert <johannes@jdoerfert.de>.
------------------------------------------------------------------------
r154251 | grosser | 2012-04-07 14:16:08 +0800 (Sat, 07 Apr 2012) | 7 lines

CodeGen: Allow Polly to do 'grouped unrolling', but no vector generation.

Grouped unrolling means that we unroll a loop such that the different instances
of a certain statement are scheduled right after each other, but we do
not generate any vector code. The idea here is that we can schedule the
bb vectorizer right afterwards and use it heuristics to decide when
vectorization should be performed.
------------------------------------------------------------------------
r154162 | ether | 2012-04-06 11:56:27 +0800 (Fri, 06 Apr 2012) | 6 lines

Fix a bug introduced by r153739: We are not able to provide the correct
  dependent list for target polly-test, hence making "all" from the top
  of llvm build directory will cause the target "polly-test" being built
  before its dependencing target built.

Patched by Sebastian Pop<spop@codeaurora.org>
------------------------------------------------------------------------
r153954 | grosser | 2012-04-03 20:37:14 +0800 (Tue, 03 Apr 2012) | 1 line

CodeGen: Remove unused declaration
------------------------------------------------------------------------
r153952 | grosser | 2012-04-03 20:24:32 +0800 (Tue, 03 Apr 2012) | 12 lines

CodeGen: Recreate old ivs with the original type

To avoid overflows we still use a larger type (i64) while calculating the value
of the old ivs.  However, we truncate the result to the type of the old iv when
providing it to the new code.

A corresponding test case is added to the polly test suite. Also, a failing test
case is fixed.

This fixes PR12311.

Contributed by: Tsingray Liu  <tsingrayliu@gmail.com>
------------------------------------------------------------------------
r153948 | ether | 2012-04-03 17:15:52 +0800 (Tue, 03 Apr 2012) | 1 line

www: Fix typo, replace "LD_LBIRARY_PATH" by "LD_LIBRARY_PATH" in get_started.
------------------------------------------------------------------------
r153936 | ether | 2012-04-03 14:29:27 +0800 (Tue, 03 Apr 2012) | 1 line

www: Append path instead overwrite path when exporting the path of pocc.
------------------------------------------------------------------------
r153934 | ether | 2012-04-03 12:39:47 +0800 (Tue, 03 Apr 2012) | 2 lines

www: Fix typo in the setting LD_LBIRARY_PATH command, as pointed out by
  Dmitry N. Mikushin.
------------------------------------------------------------------------
r153871 | grosser | 2012-04-02 20:26:13 +0800 (Mon, 02 Apr 2012) | 1 line

CodeGen: Some style improvements
------------------------------------------------------------------------
r153840 | grosser | 2012-04-02 00:55:30 +0800 (Mon, 02 Apr 2012) | 1 line

CodeGen: Remove unused variable
------------------------------------------------------------------------
r153839 | grosser | 2012-04-02 00:49:48 +0800 (Mon, 02 Apr 2012) | 1 line

Remove unneeded alias analysis
------------------------------------------------------------------------
r153838 | grosser | 2012-04-02 00:49:45 +0800 (Mon, 02 Apr 2012) | 11 lines

CodeGen: Allow function parameters to be rewritten in getNewValue()

When deriving new values for the statements of a SCoP, we assumed that parameter
values are constant within the SCoP and consquently do not need to be rewritten.
For OpenMP code generation this assumption is wrong, as such values are not
available in the OpenMP subfunction and consequently also may need to be
rewritten.

Committed with some changes.

Contributed-By: Johannes Doerfert  <s9jodoer@stud.uni-saarland.de>
------------------------------------------------------------------------
r153739 | ether | 2012-03-30 17:27:16 +0800 (Fri, 30 Mar 2012) | 3 lines

Make the "all" target depend on polly-test, so that users can run regression
  tests by simply typing "make -C tools/polly/test", like llvm's regression
  tests.
------------------------------------------------------------------------
r153738 | ether | 2012-03-30 17:27:07 +0800 (Fri, 30 Mar 2012) | 1 line

Autoconf build: Try to update LLVMPolly.so before running regression tests
------------------------------------------------------------------------
r153736 | ether | 2012-03-30 16:46:18 +0800 (Fri, 30 Mar 2012) | 2 lines

Move the CodeGeneration.cpp to the CodeGen folder and update the build system.
  Patched by Tsingray.
------------------------------------------------------------------------
r153734 | ether | 2012-03-30 16:18:19 +0800 (Fri, 30 Mar 2012) | 2 lines

Get started guide: Suggest users to append the parent directory of cloog
  libraries to LD_LIBRARY_PATH.
------------------------------------------------------------------------
r153664 | grosser | 2012-03-30 01:53:54 +0800 (Fri, 30 Mar 2012) | 1 line

www: Add more missing features to the TODO list
------------------------------------------------------------------------
r153647 | grosser | 2012-03-29 21:10:34 +0800 (Thu, 29 Mar 2012) | 6 lines

www: Update TODO list

- Link to several new bug reports that describe problems in more detail
- Add some more items
- Remove owners for inactive projects. This just blocks other people
- Rename 'middle part' to 'optimizer'
------------------------------------------------------------------------
r153646 | grosser | 2012-03-29 21:10:30 +0800 (Thu, 29 Mar 2012) | 1 line

www: Link to console view with only polly buildbots
------------------------------------------------------------------------
r153645 | grosser | 2012-03-29 21:10:26 +0800 (Thu, 29 Mar 2012) | 1 line

CodeGeneration: Proberly build the dominator tree
------------------------------------------------------------------------
r153644 | ether | 2012-03-29 21:10:10 +0800 (Thu, 29 Mar 2012) | 1 line

Use python script to silence the expected testcase fails on 32bit platform.
------------------------------------------------------------------------
r153642 | ether | 2012-03-29 20:36:52 +0800 (Thu, 29 Mar 2012) | 3 lines

Regession testing: Substitut POLLY_LIB_DIR, which is introduced by commit
  r152924, by $(LibDir). Because we assume polly built by autoconf is always
  in llvm tree.
------------------------------------------------------------------------
r153503 | ether | 2012-03-27 15:56:07 +0800 (Tue, 27 Mar 2012) | 3 lines

Out of tree build support: Set TARGET_TRIPLE from the result of "llvm-config --host-target"
  instead of loading the "LLVMConfig.cmake" which is only installed when
  llvm configured by cmake.
------------------------------------------------------------------------
r153440 | ether | 2012-03-26 23:16:48 +0800 (Mon, 26 Mar 2012) | 1 line

Don't fail the lli testcases on 32bit platform.
------------------------------------------------------------------------
r153439 | ether | 2012-03-26 23:16:29 +0800 (Mon, 26 Mar 2012) | 1 line

Out-of-tree build: Load the configuration of the installed llvm.
------------------------------------------------------------------------
r153331 | grosser | 2012-03-23 20:20:36 +0800 (Fri, 23 Mar 2012) | 1 line

CodeGen: Remove the need for setIVS
------------------------------------------------------------------------
r153330 | grosser | 2012-03-23 20:20:32 +0800 (Fri, 23 Mar 2012) | 1 line

CodeGen: Simplify Variable Names
------------------------------------------------------------------------
r153325 | grosser | 2012-03-23 18:35:18 +0800 (Fri, 23 Mar 2012) | 5 lines

CodeGen: Extract the LLVM-IR generaction of scalar and OpenMP loops.

We create a new file LoopGenerators that provides utility classes for the
generation of OpenMP parallel and scalar loops. This means we move a lot
of the OpenMP generation out of the Polly specific code generator.
------------------------------------------------------------------------
r153321 | grosser | 2012-03-23 16:24:10 +0800 (Fri, 23 Mar 2012) | 3 lines

CodeGen: Change some variables to uppercase

No functional changes intended.
------------------------------------------------------------------------
r153320 | grosser | 2012-03-23 16:24:04 +0800 (Fri, 23 Mar 2012) | 3 lines

test: Remove memaccess prefix

The prefix is not needed, as all test cases are already in a separate folder.
------------------------------------------------------------------------
r153319 | grosser | 2012-03-23 16:21:22 +0800 (Fri, 23 Mar 2012) | 8 lines

CodeGen: Full support for isl_pw expressions in modified access functions.

This also adds support for modifiable write accesses (until now only read
accesses where supported). We currently do not derive an exact type for the
expression, but assume that i64 is good enough. This will be improved in future
patches.

Contributed by: Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r153318 | grosser | 2012-03-23 16:02:19 +0800 (Fri, 23 Mar 2012) | 5 lines

IndVarSimplify: Disable simplifyIVUsers

This functionality is not available in LLVM trunk and breaks the compilation of
Polly. This patch fixes the compilation, but may not be enough to recover all
functionality.
------------------------------------------------------------------------
r153317 | grosser | 2012-03-23 16:02:15 +0800 (Fri, 23 Mar 2012) | 3 lines

IndVarSimplify: Adapt to changes in LLVM trunk

Contributed-By: Andrew Trick <atrick@apple.com>
------------------------------------------------------------------------
r153316 | grosser | 2012-03-23 16:02:05 +0800 (Fri, 23 Mar 2012) | 1 line

IndVarSimplify: Proberly initialize the pass.
------------------------------------------------------------------------
r152936 | grosser | 2012-03-17 02:45:10 +0800 (Sat, 17 Mar 2012) | 1 line

ScheduleOptimizer: Remove forgotten debug output
------------------------------------------------------------------------
r152933 | grosser | 2012-03-17 01:17:16 +0800 (Sat, 17 Mar 2012) | 9 lines

Do not fail if a command line argument is given more than once

For boolean flags in Polly there is no problem if they are given more than once.
Hence, we can allow it to not fail for build systems that (acciently) add flags
several times.

This fixes: PR12278

Reported by: Sebastian Pop  <sebpop@gmail.com>
------------------------------------------------------------------------
r152928 | grosser | 2012-03-17 00:36:47 +0800 (Sat, 17 Mar 2012) | 8 lines

Don't allow pointer types in affine expressions

We currently do not support pointer types in affine expressions. Hence, we
disallow in the SCoP detection. Later we may decide to add support for them.

This fixes PR12277

Reported-By: Sebastian Pop  <sebpop@gmail.com>
------------------------------------------------------------------------
r152925 | ether | 2012-03-16 22:34:27 +0800 (Fri, 16 Mar 2012) | 1 line

Off-tree build support: Also check the existence of the "not" utility.
------------------------------------------------------------------------
r152924 | ether | 2012-03-16 22:34:20 +0800 (Fri, 16 Mar 2012) | 1 line

Off-tree build support: Set the path of Polly's library correctly.
------------------------------------------------------------------------
r152923 | ether | 2012-03-16 21:49:55 +0800 (Fri, 16 Mar 2012) | 3 lines

Revert "Minor change: Use config.polly_obj_root to locate Polly's library,"

This reverts commit 7dd9b6327b54b08ece32a4607d5ac093b518b79a.
------------------------------------------------------------------------
r152921 | ether | 2012-03-16 21:24:42 +0800 (Fri, 16 Mar 2012) | 1 line

Off-tree build support: Warn the user if FileCheck cannot be found.
------------------------------------------------------------------------
r152920 | ether | 2012-03-16 21:24:34 +0800 (Fri, 16 Mar 2012) | 2 lines

Minor change: Use config.polly_obj_root to locate Polly's library,
  so lit find Polly's library in off-tree build.
------------------------------------------------------------------------
r152917 | grosser | 2012-03-16 19:51:41 +0800 (Fri, 16 Mar 2012) | 4 lines

ScheduleOptimizer: Do not get dependences, if we do not calculate a schedule

This solves the 'isl_ctx freed, but some objects still reference it' problem
reported in PR12276.
------------------------------------------------------------------------
r152913 | grosser | 2012-03-16 18:16:28 +0800 (Fri, 16 Mar 2012) | 6 lines

SCEVValidator: Ensure that parameters are recorded correctly

This also fixes UMax where we did not correctly keep track of the parameters.
Fixes PR12275.

Reported-By: Sebastian Pop  <sebpop@gmail.com>
------------------------------------------------------------------------
r152912 | grosser | 2012-03-16 18:12:37 +0800 (Fri, 16 Mar 2012) | 1 line

ScevValidator: Add printer for ValidatorResult
------------------------------------------------------------------------
r152910 | ether | 2012-03-16 17:04:09 +0800 (Fri, 16 Mar 2012) | 3 lines

Polly-test: Add a cmake option "POLLY_TEST_DISABLE_BAR". We can enable
 this option in the configure step of Polly's builder to get more readable
 output from the stdio log.
------------------------------------------------------------------------
r152909 | ether | 2012-03-16 16:31:24 +0800 (Fri, 16 Mar 2012) | 1 line

More AddUsersIfInteresting related fix.
------------------------------------------------------------------------
r152908 | ether | 2012-03-16 16:26:12 +0800 (Fri, 16 Mar 2012) | 1 line

IndVarSimplify: Adpat to IVUsers::AddUsersIfInteresting change.
------------------------------------------------------------------------
r152800 | grosser | 2012-03-15 21:55:38 +0800 (Thu, 15 Mar 2012) | 1 line

www: Fix german special characters
------------------------------------------------------------------------
r152799 | grosser | 2012-03-15 21:54:12 +0800 (Thu, 15 Mar 2012) | 1 line

www: Add another GPGPU publication
------------------------------------------------------------------------
r152795 | raghesh | 2012-03-15 19:40:05 +0800 (Thu, 15 Mar 2012) | 5 lines

Memaccess: Updating Documentation

Adding documentation for changes in coefficients of induction
variables.

------------------------------------------------------------------------
r152793 | grosser | 2012-03-15 17:34:58 +0800 (Thu, 15 Mar 2012) | 1 line

CodeGen: Call isl_set_copy() within the loop
------------------------------------------------------------------------
r152792 | grosser | 2012-03-15 17:34:55 +0800 (Thu, 15 Mar 2012) | 1 line

CodeGen: Start variables with uppercase letters
------------------------------------------------------------------------
r152791 | grosser | 2012-03-15 17:34:52 +0800 (Thu, 15 Mar 2012) | 1 line

CodeGen: Get analyses from the Pass instance
------------------------------------------------------------------------
r152790 | grosser | 2012-03-15 17:34:48 +0800 (Thu, 15 Mar 2012) | 1 line

CodeGen: Introduce helper function to get pointer to int
------------------------------------------------------------------------
r152612 | raghesh | 2012-03-13 13:51:44 +0800 (Tue, 13 Mar 2012) | 6 lines

Memaccess: Removing unwanted code

When the code is moved to IslGenerator class there is no use for
IslPwAffUserInfo.


------------------------------------------------------------------------
r152319 | grosser | 2012-03-08 23:21:51 +0800 (Thu, 08 Mar 2012) | 10 lines

Remove FinalRead

The FinalRead statement represented a virtual read that is executed after the
SCoP. It was used when we verified the correctness of a schedule by checking if
it yields the same FLOW dependences as the original code. This is only works, if
we have a final read that reads all memory at the end of the SCoP.
We now switched to just checking if a schedule does not introduce negative
dependences and also consider WAW WAR dependences. This restricts the schedules
a little bit more, but we do not have any optimizer that would calculate a more
complex schedule. Hence, for now final reads are obsolete.
------------------------------------------------------------------------
r152318 | grosser | 2012-03-08 23:21:42 +0800 (Thu, 08 Mar 2012) | 1 line

Dependences: Fix typo
------------------------------------------------------------------------
r152311 | grosser | 2012-03-08 20:02:59 +0800 (Thu, 08 Mar 2012) | 1 line

www: Really fix it
------------------------------------------------------------------------
r152310 | grosser | 2012-03-08 20:02:10 +0800 (Thu, 08 Mar 2012) | 1 line

www: Fix link to image
------------------------------------------------------------------------
r152309 | grosser | 2012-03-08 19:59:43 +0800 (Thu, 08 Mar 2012) | 1 line

www: Move the Polly architecture to the documentation
------------------------------------------------------------------------
r152308 | grosser | 2012-03-08 19:55:27 +0800 (Thu, 08 Mar 2012) | 1 line

www: Point to the memaccess documentation
------------------------------------------------------------------------
r152307 | grosser | 2012-03-08 19:45:49 +0800 (Thu, 08 Mar 2012) | 1 line

www: Simplify bugs text
------------------------------------------------------------------------
r152306 | grosser | 2012-03-08 19:37:39 +0800 (Thu, 08 Mar 2012) | 1 line

www: Merge Examples with Documentation section
------------------------------------------------------------------------
r152305 | grosser | 2012-03-08 19:31:54 +0800 (Thu, 08 Mar 2012) | 1 line

www: Update todo page
------------------------------------------------------------------------
r152238 | grosser | 2012-03-08 01:42:49 +0800 (Thu, 08 Mar 2012) | 1 line

Dependences: Simplify isParallelDimension
------------------------------------------------------------------------
r152237 | grosser | 2012-03-08 01:42:45 +0800 (Thu, 08 Mar 2012) | 1 line

Dependences: Restructure and Document code
------------------------------------------------------------------------
r152236 | grosser | 2012-03-08 01:42:39 +0800 (Thu, 08 Mar 2012) | 1 line

Dependences: Prettify the header slightly
------------------------------------------------------------------------
r152235 | grosser | 2012-03-08 01:42:36 +0800 (Thu, 08 Mar 2012) | 1 line

Dependences: Remove unused no_source information
------------------------------------------------------------------------
r152230 | grosser | 2012-03-08 00:10:40 +0800 (Thu, 08 Mar 2012) | 5 lines

Dependences: Simplify the check if a new scattering is valid.

We now just check if the new scattering would create non-positive dependences.
This is a lot faster than recalculating dependences (which is especially slow
on tiled code).
------------------------------------------------------------------------
r152229 | grosser | 2012-03-07 22:30:54 +0800 (Wed, 07 Mar 2012) | 1 line

www: Fix some command lines in the examples
------------------------------------------------------------------------
r152109 | grosser | 2012-03-06 15:38:57 +0800 (Tue, 06 Mar 2012) | 3 lines

CodeGen: Fix typo 'form' -> 'from'

Suggested by: Sebastian Pop  <sebpop@gmail.com>
------------------------------------------------------------------------
r151917 | grosser | 2012-03-02 23:20:39 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Document and beautify the parts of the BlockGenerators
------------------------------------------------------------------------
r151916 | grosser | 2012-03-02 23:20:35 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Pass the scalar maps properly
------------------------------------------------------------------------
r151915 | grosser | 2012-03-02 23:20:31 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Prettify
------------------------------------------------------------------------
r151914 | grosser | 2012-03-02 23:20:28 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Style
------------------------------------------------------------------------
r151913 | grosser | 2012-03-02 23:20:24 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Move domain into the VectorBlockGenerator
------------------------------------------------------------------------
r151912 | grosser | 2012-03-02 23:20:21 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Simplify the generation of a splat
------------------------------------------------------------------------
r151911 | grosser | 2012-03-02 23:20:17 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Prettify function
------------------------------------------------------------------------
r151907 | grosser | 2012-03-02 19:27:28 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Create separate VectorBlockGenerator
------------------------------------------------------------------------
r151906 | grosser | 2012-03-02 19:27:25 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Extract code generation for isl types into its own class
------------------------------------------------------------------------
r151905 | grosser | 2012-03-02 19:27:21 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Remove unneeded member variable
------------------------------------------------------------------------
r151904 | grosser | 2012-03-02 19:27:18 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Extract code into the new function copyVectorInstruction
------------------------------------------------------------------------
r151903 | grosser | 2012-03-02 19:27:15 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Sink loop to iterate vector lanes down into copyInstruction
------------------------------------------------------------------------
r151902 | grosser | 2012-03-02 19:27:11 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGenerator: Rename functions to show they produce vector code
------------------------------------------------------------------------
r151901 | grosser | 2012-03-02 19:27:08 +0800 (Fri, 02 Mar 2012) | 1 line

Fix typo
------------------------------------------------------------------------
r151900 | grosser | 2012-03-02 19:27:05 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: No need to forward the vector dimension
------------------------------------------------------------------------
r151899 | grosser | 2012-03-02 19:27:02 +0800 (Fri, 02 Mar 2012) | 3 lines

CodeGen: Store the vector width in the block generator

This allows us to remove a lot of redundant parameters.
------------------------------------------------------------------------
r151898 | grosser | 2012-03-02 19:26:59 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Remove dead code
------------------------------------------------------------------------
r151897 | grosser | 2012-03-02 19:26:55 +0800 (Fri, 02 Mar 2012) | 1 line

Codegen: Add Pass as a member variable of BlockGenerator
------------------------------------------------------------------------
r151896 | grosser | 2012-03-02 19:26:52 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Simplify and Prettify code
------------------------------------------------------------------------
r151895 | grosser | 2012-03-02 19:26:49 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Hide the private implementation of the block generator
------------------------------------------------------------------------
r151894 | grosser | 2012-03-02 19:26:46 +0800 (Fri, 02 Mar 2012) | 1 line

CodeGen: Start with uppercase letter
------------------------------------------------------------------------
r151893 | grosser | 2012-03-02 19:26:42 +0800 (Fri, 02 Mar 2012) | 3 lines

CodeGen: Only check once if a loop is parallel

Suggested by: Sebastian Pop  <sebpop@gmail.com>
------------------------------------------------------------------------
r151810 | grosser | 2012-03-01 23:02:21 +0800 (Thu, 01 Mar 2012) | 3 lines

www: Fix typo founded -> funded

Found-By: Christian Lengauer
------------------------------------------------------------------------
r150959 | grosser | 2012-02-20 22:03:56 +0800 (Mon, 20 Feb 2012) | 1 line

www: Fix french special characters
------------------------------------------------------------------------
r150955 | grosser | 2012-02-20 16:41:55 +0800 (Mon, 20 Feb 2012) | 1 line

Add information, that Polly became a real LLVM project
------------------------------------------------------------------------
r150954 | grosser | 2012-02-20 16:41:51 +0800 (Mon, 20 Feb 2012) | 1 line

www: Update links polly.grosser.es -> polly.llvm.org
------------------------------------------------------------------------
r150953 | grosser | 2012-02-20 16:41:47 +0800 (Mon, 20 Feb 2012) | 1 line

ScheduleOpt: Add option to bound scheduling coefficients of dimensions.
------------------------------------------------------------------------
r150952 | grosser | 2012-02-20 16:41:44 +0800 (Mon, 20 Feb 2012) | 3 lines

Update isl

This version of isl, contains some recently committed scheduler patches.
------------------------------------------------------------------------
r150951 | grosser | 2012-02-20 16:41:21 +0800 (Mon, 20 Feb 2012) | 1 line

ScheduleOptimizer: Dump the calculated schedule in debug mode
------------------------------------------------------------------------
r150950 | grosser | 2012-02-20 16:41:15 +0800 (Mon, 20 Feb 2012) | 1 line

ScheduleOpt: Add option to bound constant term coefficients
------------------------------------------------------------------------
r150691 | grosser | 2012-02-16 22:13:19 +0800 (Thu, 16 Feb 2012) | 4 lines

Revert "CodeGeneration: Implement ceild/floord exactly as CLooG does"

I think I did not get the implementation right. As the current implementation
works well, we will just stick with it for now.
------------------------------------------------------------------------
r150676 | grosser | 2012-02-16 17:59:34 +0800 (Thu, 16 Feb 2012) | 1 line

www: Add 'pet' paper to the publications
------------------------------------------------------------------------
r150675 | grosser | 2012-02-16 17:56:21 +0800 (Thu, 16 Feb 2012) | 1 line

CodeGen: Code following a clast_guard comes after the merge block
------------------------------------------------------------------------
r150674 | grosser | 2012-02-16 17:56:17 +0800 (Thu, 16 Feb 2012) | 1 line

RegisterPasses: Allow to print the CFG right after polly
------------------------------------------------------------------------
r150673 | grosser | 2012-02-16 17:56:14 +0800 (Thu, 16 Feb 2012) | 1 line

CodeGeneration: Implement ceild/floord exactly as CLooG does
------------------------------------------------------------------------
r150672 | grosser | 2012-02-16 17:56:10 +0800 (Thu, 16 Feb 2012) | 1 line

CodeGen: Simplify code slightly
------------------------------------------------------------------------
r150671 | grosser | 2012-02-16 17:56:07 +0800 (Thu, 16 Feb 2012) | 1 line

RegisterPasses: Add -polly-run-export-cloog option
------------------------------------------------------------------------
r150577 | grosser | 2012-02-15 17:58:53 +0800 (Wed, 15 Feb 2012) | 3 lines

CodeGen: Update the BasicBlock pointer correctly when creating 'polly.split...'

Problem reported by: Ryan Taylor <ryta1203@gmail.com>
------------------------------------------------------------------------
r150576 | grosser | 2012-02-15 17:58:50 +0800 (Wed, 15 Feb 2012) | 1 line

CodeGen: Retain the old BB names within the original SCoP
------------------------------------------------------------------------
r150575 | grosser | 2012-02-15 17:58:46 +0800 (Wed, 15 Feb 2012) | 1 line

CodeGen: Name stmt bbs 'polly.stmt.' + OriginalName
------------------------------------------------------------------------
r150574 | grosser | 2012-02-15 17:58:42 +0800 (Wed, 15 Feb 2012) | 1 line

ScheduleOpt: Only get RAW dependences if we asked for raw
------------------------------------------------------------------------
r150484 | grosser | 2012-02-14 22:02:48 +0800 (Tue, 14 Feb 2012) | 4 lines

ScheduleOpt: Allow to configure for which dependences to optimize

We can either optimize for RAW dependences or for all dependences.
For the moment, I do not see a big difference here.
------------------------------------------------------------------------
r150483 | grosser | 2012-02-14 22:02:44 +0800 (Tue, 14 Feb 2012) | 5 lines

CodeGen: Get dependences for validity and proximity separately

This change itself should not change functionality, but it will make it easier
to support use different dependence kinds in for validity and proximity
constraints.
------------------------------------------------------------------------
r150482 | grosser | 2012-02-14 22:02:40 +0800 (Tue, 14 Feb 2012) | 1 line

ScopInfo: Add Scop::getDomains()
------------------------------------------------------------------------
r150481 | grosser | 2012-02-14 22:02:33 +0800 (Tue, 14 Feb 2012) | 5 lines

Copy IndVarSimplify pass from LLVM to Polly

This allows us to enable -enable-iv-rewrite by default and releases LLVM from
the burdon to keep that feature. This is an intermediate step. We plan to soon
remove the need for rewritten induction variables entirely.
------------------------------------------------------------------------
r150480 | grosser | 2012-02-14 22:02:27 +0800 (Tue, 14 Feb 2012) | 7 lines

Recommit "CodeGen: Maintain a valid CFG during code generation"

When I first tried to commit this patch, the builder pointed after generation
of a loop still into the loop body. This means that code that was supposed to
be generated after the loop was generated right into the loop body. We fixed
this by pointing the builder to the BB after the loop, as soon as code
generation of the loop body itself is finished.
------------------------------------------------------------------------
r150431 | grosser | 2012-02-14 07:31:43 +0800 (Tue, 14 Feb 2012) | 3 lines

Revert "CodeGen: Maintain a valid CFG during code generation"

This commit contained some bugs. Revert it until I get around to fix them.
------------------------------------------------------------------------
r150430 | grosser | 2012-02-14 07:31:39 +0800 (Tue, 14 Feb 2012) | 1 line

ScheduleOptimizer: Change vars to start with uppercase letter
------------------------------------------------------------------------
r150377 | grosser | 2012-02-13 20:29:43 +0800 (Mon, 13 Feb 2012) | 1 line

tests: Replace . by %s
------------------------------------------------------------------------
r150376 | grosser | 2012-02-13 20:29:34 +0800 (Mon, 13 Feb 2012) | 1 line

CodeGen: Remove unused variable.
------------------------------------------------------------------------
r150339 | grosser | 2012-02-12 20:09:53 +0800 (Sun, 12 Feb 2012) | 7 lines

CodeGen: Maintain a valid CFG during code generation

Before this change we built the CFG such that it was only valid after code was
fully generated. During code generation itself, it was often incomplete. After
this change always maintain a valid CFG. This will later allow us to use the
SCEVExpander during code generation. This is the first step to get rid of the
independent blocks pass.
------------------------------------------------------------------------
r150338 | grosser | 2012-02-12 20:09:49 +0800 (Sun, 12 Feb 2012) | 1 line

CodeGen: Remove unused instruction
------------------------------------------------------------------------
r150337 | grosser | 2012-02-12 20:09:46 +0800 (Sun, 12 Feb 2012) | 1 line

CodeGen: Always name merge block
------------------------------------------------------------------------
r150336 | grosser | 2012-02-12 20:09:41 +0800 (Sun, 12 Feb 2012) | 1 line

CodeGen: Start variable names with uppercase letter.
------------------------------------------------------------------------
r150335 | grosser | 2012-02-12 20:09:37 +0800 (Sun, 12 Feb 2012) | 1 line

Codegen: Give  split and merge basic blocks better names
------------------------------------------------------------------------
r150334 | grosser | 2012-02-12 20:09:32 +0800 (Sun, 12 Feb 2012) | 1 line

CodeGen: Further improve style
------------------------------------------------------------------------
r150333 | grosser | 2012-02-12 20:09:27 +0800 (Sun, 12 Feb 2012) | 3 lines

CodeGen: Move generation of OpenMP out of the way

We also fix some style issues. This change contains no functional change.
------------------------------------------------------------------------
r149871 | grosser | 2012-02-06 22:53:51 +0800 (Mon, 06 Feb 2012) | 1 line

RegisterPasses: Make sure to always execute the SCoPInfo pass
------------------------------------------------------------------------
r149503 | grosser | 2012-02-01 22:23:36 +0800 (Wed, 01 Feb 2012) | 1 line

ScopInfo: Simplify some isl code
------------------------------------------------------------------------
r149502 | grosser | 2012-02-01 22:23:33 +0800 (Wed, 01 Feb 2012) | 1 line

CodeGeneration: Rephrase comment slightly
------------------------------------------------------------------------
r149501 | grosser | 2012-02-01 22:23:29 +0800 (Wed, 01 Feb 2012) | 1 line

CodeGeneration: Order includes alphabetically
------------------------------------------------------------------------
r149456 | grosser | 2012-02-01 08:08:10 +0800 (Wed, 01 Feb 2012) | 3 lines

www: More typos

Pointed out by Chad Rosier
------------------------------------------------------------------------
r149415 | grosser | 2012-02-01 04:24:21 +0800 (Wed, 01 Feb 2012) | 3 lines

www: Add missing -mllvm to documentation

Found by Ryan Taylor
------------------------------------------------------------------------
r149410 | grosser | 2012-02-01 03:54:50 +0800 (Wed, 01 Feb 2012) | 3 lines

www: Spelling fixes

Reported by Sebastian Pop
------------------------------------------------------------------------
r149386 | grosser | 2012-01-31 22:00:27 +0800 (Tue, 31 Jan 2012) | 12 lines

Add a sceleton for a polyhedral dead code elimination.

Such a dead code elimination can remove redundant stores to arrays. It can also
eliminate calculations where the results are stored to memory but where they are
overwritten before ever being read. It may also fix bugs like:
http://llvm.org/bugs/show_bug.cgi?id=5117

This commit just adds a sceleton without any functionality.

If anybody is interested to learn about polyhedral optimizations this would be
a good task. Well definined, self contained and pretty simple. Ping me if you
want to start and you need some pointers to get going.
------------------------------------------------------------------------
r149383 | grosser | 2012-01-31 21:26:29 +0800 (Tue, 31 Jan 2012) | 1 line

Schedule: Sort includes and remove useless ones
------------------------------------------------------------------------
r149374 | grosser | 2012-01-31 17:13:12 +0800 (Tue, 31 Jan 2012) | 1 line

www: Add news about the improved isl scheduling support
------------------------------------------------------------------------
r149373 | grosser | 2012-01-31 16:50:23 +0800 (Tue, 31 Jan 2012) | 1 line

www: Remove PoCC from the prerequisites
------------------------------------------------------------------------
r149372 | grosser | 2012-01-31 16:50:19 +0800 (Tue, 31 Jan 2012) | 5 lines

polly.sh: Do not automatically install scoplib either.

It is only needed for PoCC. We may update our openscop support which is
expected to be wider used. If this is the case we could automatically build
openscop.
------------------------------------------------------------------------
r149371 | grosser | 2012-01-31 16:50:16 +0800 (Tue, 31 Jan 2012) | 1 line

www: Move PoCC to the end of the installation section
------------------------------------------------------------------------
r149370 | grosser | 2012-01-31 16:50:12 +0800 (Tue, 31 Jan 2012) | 5 lines

polly.sh: Do not build PoCC automatically

As we now have a scheduler that works, I do not believe a lot of people need
PoCC right ahead. People who want to do an in depth investigation of the
different schedulers can install it as well manually.
------------------------------------------------------------------------
r149290 | grosser | 2012-01-31 06:46:22 +0800 (Tue, 31 Jan 2012) | 1 line

Remove leftover constant
------------------------------------------------------------------------
r149288 | grosser | 2012-01-31 06:44:05 +0800 (Tue, 31 Jan 2012) | 6 lines

Scheduling: Limiting the constant term is not necessary any more

Due to our gist simplifications, limiting the constant term does not seem to
be necessary any more.

Pointed out by Sven Verdoolaege
------------------------------------------------------------------------
r149287 | grosser | 2012-01-31 06:43:56 +0800 (Tue, 31 Jan 2012) | 3 lines

Typo: Maxize -> Mazimize

Found by Sebastian Pop.
------------------------------------------------------------------------
r149267 | grosser | 2012-01-31 03:38:58 +0800 (Tue, 31 Jan 2012) | 6 lines

Scheduling: Set fusion strategy to minimal

This has shown better results for 2mm, 3mm and a couple of other benchmarks.

After this we show consistenly better results as PoCC with maxfuse. We need
to see if PoCC can also give better results with another fusion strategy.
------------------------------------------------------------------------
r149266 | grosser | 2012-01-31 03:38:54 +0800 (Tue, 31 Jan 2012) | 5 lines

Scheduling: Add option to disable schedule_maximise_band_depth

maximise_band_depth does not seem to have any effect for now, but it may help to
increase the amount of tileable loops. We expose the flag to be able to analyze
its effects when looking into individual benchmarks.
------------------------------------------------------------------------
r149265 | grosser | 2012-01-31 03:38:50 +0800 (Tue, 31 Jan 2012) | 1 line

Scheduler: Allow to select the fusion strategy
------------------------------------------------------------------------
r149264 | grosser | 2012-01-31 03:38:47 +0800 (Tue, 31 Jan 2012) | 4 lines

Scheduling: Use original schedule if we cannot find a new one

After this we can now compile all polybench 2.0 kernels without any compiler
crash.
------------------------------------------------------------------------
r149263 | grosser | 2012-01-31 03:38:43 +0800 (Tue, 31 Jan 2012) | 15 lines

Scheduler: Simplify dependences by default (only isl)

This speeds up the scheduler by orders of magnitude and in addition yields often
to a better schedule.

With this we can compile all polybench kernels with less than 5x compile time
overhead. In general the overhead is even less than 2-3x.  This is still with
running a lot of redundant passes and no compile time tuning at all. There are
several obvious areas where we can improve here further.

There are also two test cases where we cannot find a schedule any more (cholesky
and another). I will look into them later on.

With this we have a very solid base line from which we can start to optimize
further.
------------------------------------------------------------------------
r149262 | grosser | 2012-01-31 03:38:40 +0800 (Tue, 31 Jan 2012) | 3 lines

Use isl version: 3c66541593a6bf3b5a3d35d31567abe6c9e5a04b

This allows us to set the fusion strategy and to gist-simplify union_maps.
------------------------------------------------------------------------
r149261 | grosser | 2012-01-31 03:38:36 +0800 (Tue, 31 Jan 2012) | 1 line

Dependences: Coalesce the dependences before returning them.
------------------------------------------------------------------------
r149240 | grosser | 2012-01-30 17:07:50 +0800 (Mon, 30 Jan 2012) | 1 line

RegisterPass: Expose functions to register Polly passes
------------------------------------------------------------------------
r149239 | grosser | 2012-01-30 17:07:45 +0800 (Mon, 30 Jan 2012) | 1 line

Disable some clang warnings in imported JSON code.
------------------------------------------------------------------------
r149073 | grosser | 2012-01-27 03:53:01 +0800 (Fri, 27 Jan 2012) | 3 lines

Remove unneeded default case

This silences a clang warning.
------------------------------------------------------------------------
r148814 | grosser | 2012-01-25 00:42:32 +0800 (Wed, 25 Jan 2012) | 1 line

CodeGen: Separate declaration and definition of ClastStmtCodeGen
------------------------------------------------------------------------
r148813 | grosser | 2012-01-25 00:42:28 +0800 (Wed, 25 Jan 2012) | 1 line

CodeGen: Separate declaration and definition of ClastExpCodeGen
------------------------------------------------------------------------
r148812 | grosser | 2012-01-25 00:42:25 +0800 (Wed, 25 Jan 2012) | 1 line

CodeGen: Use getNullValue to simplify some code
------------------------------------------------------------------------
r148811 | grosser | 2012-01-25 00:42:21 +0800 (Wed, 25 Jan 2012) | 1 line

CodeGen: Separate declaration and definitions of BlockGenerator
------------------------------------------------------------------------
r148810 | grosser | 2012-01-25 00:42:16 +0800 (Wed, 25 Jan 2012) | 1 line

ScopInfo: Add isStrideX to unify stride checking
------------------------------------------------------------------------
r148620 | grosser | 2012-01-21 10:38:27 +0800 (Sat, 21 Jan 2012) | 1 line

Dependences: Simplify code
------------------------------------------------------------------------
r148328 | grosser | 2012-01-18 04:39:11 +0800 (Wed, 18 Jan 2012) | 1 line

ScopInfo: Further style improvements
------------------------------------------------------------------------
r148327 | grosser | 2012-01-18 04:34:27 +0800 (Wed, 18 Jan 2012) | 1 line

ScopInfo: Simplify some code II
------------------------------------------------------------------------
r148326 | grosser | 2012-01-18 04:34:23 +0800 (Wed, 18 Jan 2012) | 1 line

ScopInfo: Simplify some code
------------------------------------------------------------------------
r148307 | grosser | 2012-01-17 22:44:35 +0800 (Tue, 17 Jan 2012) | 1 line

www: Move automatic polly installation to a more prominent place
------------------------------------------------------------------------
r148306 | grosser | 2012-01-17 22:37:45 +0800 (Tue, 17 Jan 2012) | 1 line

www: Fix clang path in polly.sh script
------------------------------------------------------------------------
r148248 | grosser | 2012-01-17 02:50:43 +0800 (Tue, 17 Jan 2012) | 1 line

Fix clang svn address
------------------------------------------------------------------------
r148238 | grosser | 2012-01-16 23:19:19 +0800 (Mon, 16 Jan 2012) | 1 line

Describe how to optionally build the matching clang version.
------------------------------------------------------------------------
r148100 | raghesh | 2012-01-13 14:02:13 +0800 (Fri, 13 Jan 2012) | 3 lines

Memaccess: Removing some unwanted code


------------------------------------------------------------------------
r147543 | spop | 2012-01-05 04:11:18 +0800 (Thu, 05 Jan 2012) | 1 line

add polly.sh script
------------------------------------------------------------------------
r147444 | grosser | 2012-01-03 18:10:05 +0800 (Tue, 03 Jan 2012) | 1 line

www: Papers about iterative compilation and non static control
------------------------------------------------------------------------
r147443 | grosser | 2012-01-03 18:00:55 +0800 (Tue, 03 Jan 2012) | 1 line

Add Udays PhD thesis
------------------------------------------------------------------------
r147442 | grosser | 2012-01-03 17:50:29 +0800 (Tue, 03 Jan 2012) | 4 lines

Update publications

- Add the LLVM Developer Meeting 2012 talk
- Add papers used within Polly and papers interesting to read in general
------------------------------------------------------------------------
r147395 | chapuni | 2012-01-01 16:16:56 +0800 (Sun, 01 Jan 2012) | 1 line

Happy new year 2012!
------------------------------------------------------------------------
r147305 | raghesh | 2011-12-28 10:48:26 +0800 (Wed, 28 Dec 2011) | 7 lines

Memaccess: Using isl_map_dim_max

Use isl_map_dim_max to extract the details of the changed
access relation. Only constant access functions are supported
now.


------------------------------------------------------------------------
r146972 | grosser | 2011-12-20 18:43:14 +0800 (Tue, 20 Dec 2011) | 7 lines

Support non-affine access functions in Polly.

In case we can not analyze an access function, we do not discard the SCoP, but
assume conservatively that all memory accesses that can be derived from our base
pointer may be accessed.

Patch provided by: Marcello Maggioni <hayarms@gmail.com>
------------------------------------------------------------------------
r146727 | grosser | 2011-12-16 16:27:42 +0800 (Fri, 16 Dec 2011) | 1 line

Adapt to move of isSafeToSpeculativelyExecute into another header.
------------------------------------------------------------------------
r146560 | grosser | 2011-12-14 20:21:31 +0800 (Wed, 14 Dec 2011) | 8 lines

Allow to run the Polly preopt passes with -O0

To extract a preoptimized LLVM-IR file from a C-file run:

clang -Xclang -load -Xclang LLVMPolly.so -O0 -mllvm -polly file.c -S -emit-llvm

On the generated file you can directly run passes such as:
'opt -view-scops file.s'
------------------------------------------------------------------------
r146559 | grosser | 2011-12-14 20:21:27 +0800 (Wed, 14 Dec 2011) | 1 line

www: Enable mp4 version of the developer meeting talk
------------------------------------------------------------------------
r146557 | grosser | 2011-12-14 16:58:43 +0800 (Wed, 14 Dec 2011) | 13 lines

Scheduler: Try to maximize the band depth

Previously the scheduler was splitting bands at the level at which it detected
that the splitting of the band is necessary. This may introduce an additional
level of bands, that can be avoided by backtracking and splitting on a higher
level. Additional splits reduce the number of loops that can be tiled, such that
avoiding splits and maximizing the band depth seems preferable.

As a first data point we looked at 2mm and 3mm from the polybench test suite.
For both maximizing the tilable bands results in a significant (5-10x)
performance improvement.

This patch enables the isl scheduler option to maximize the band depth.
------------------------------------------------------------------------
r146556 | grosser | 2011-12-14 16:58:39 +0800 (Wed, 14 Dec 2011) | 20 lines

Scheduler: Set maximal constant term

If larger coefficients appear as part of the input dependences, the schedule
calculation can take a very long time. We observed that the main overhead in
this calculation is due to optimizing the constant coefficients. They are
misused to increase locality by merging several unrelated dimensions into a
single dimension. This unwanted optimization increases the complexity of the
generated code and furthermore slows it down.

We use a new isl scheduler option to bound the values in the constant dimension
by a user defined value (20 in our case). If the right value is choosen, costly
overoptimization is prevented.

This solution works, but requires a specific (here almost randomly choosen)
value by which the constants are bound. For the moment, this is our best
solution, but we hope to to find a more generic one later on.

After these patch the extremly long compile time for simple kernels like 2mm or
3mm is reduced to a reasonable amount of time (Not more than a couple of seconds
even in debug mode).
------------------------------------------------------------------------
r146555 | grosser | 2011-12-14 16:58:36 +0800 (Wed, 14 Dec 2011) | 3 lines

Update isl

This updates bringes new options for the isl scheduler.
------------------------------------------------------------------------
r146487 | grosser | 2011-12-13 23:09:09 +0800 (Tue, 13 Dec 2011) | 1 line

www: Add forgotten files
------------------------------------------------------------------------
r146486 | grosser | 2011-12-13 23:07:00 +0800 (Tue, 13 Dec 2011) | 1 line

www: Add LLVM Developer Meeting Video (webm only)
------------------------------------------------------------------------
r146485 | grosser | 2011-12-13 22:53:25 +0800 (Tue, 13 Dec 2011) | 1 line

www: Improve styling of news section
------------------------------------------------------------------------
r146484 | grosser | 2011-12-13 22:53:20 +0800 (Tue, 13 Dec 2011) | 1 line

www: Rephrase the introduction to Polly
------------------------------------------------------------------------
r146373 | grosser | 2011-12-12 22:52:31 +0800 (Mon, 12 Dec 2011) | 1 line

Upgrade to CLooG 0.17.0
------------------------------------------------------------------------
r146279 | d0k | 2011-12-10 05:34:43 +0800 (Sat, 10 Dec 2011) | 1 line

Update after LLVM API change.
------------------------------------------------------------------------
r146255 | raghesh | 2011-12-09 22:27:17 +0800 (Fri, 09 Dec 2011) | 3 lines

Memacess: Some style changes


------------------------------------------------------------------------
r146149 | grosser | 2011-12-08 21:02:58 +0800 (Thu, 08 Dec 2011) | 1 line

ScheduleOptimizer: Do not tile bands with just one dimension
------------------------------------------------------------------------
r146033 | grosser | 2011-12-07 19:03:48 +0800 (Wed, 07 Dec 2011) | 4 lines

ClooG: Make sure ambigous schedules do not introduce complicated code

Cloog continued to split the domains even after the scattering. This lead to
complicated code.
------------------------------------------------------------------------
r146028 | grosser | 2011-12-07 15:42:57 +0800 (Wed, 07 Dec 2011) | 4 lines

ScheduleOptimizer: Rewrite getPrevectorMap to use isl_pw_aff

This increases the readablity. This also adds some comments that explain
what this function does.
------------------------------------------------------------------------
r146027 | grosser | 2011-12-07 15:42:51 +0800 (Wed, 07 Dec 2011) | 1 line

Make isl abort when an error is encountered
------------------------------------------------------------------------
r145933 | grosser | 2011-12-06 18:48:32 +0800 (Tue, 06 Dec 2011) | 1 line

Update isl.
------------------------------------------------------------------------
r145932 | grosser | 2011-12-06 18:48:27 +0800 (Tue, 06 Dec 2011) | 1 line

CodeGen: Style improvements.
------------------------------------------------------------------------
r145790 | grosser | 2011-12-04 18:44:14 +0800 (Sun, 04 Dec 2011) | 5 lines

Cloog: Include header file for pipe/open/close

We forgot to include the unistd.h header file that defines the
functions mentioned above. This was not a problem with gnu C++ library,
however it did not work for libc++.
------------------------------------------------------------------------
r145402 | grosser | 2011-11-29 22:51:05 +0800 (Tue, 29 Nov 2011) | 4 lines

test: Switch to new atomic instructions

This fixes the test with recent versions of LLVM that do not support
the old atomic instructions any more.
------------------------------------------------------------------------
r145401 | grosser | 2011-11-29 22:50:52 +0800 (Tue, 29 Nov 2011) | 3 lines

Add utils/jscop2cloog.py

This tool takes a jscop file and translates it into a cloog input file.
------------------------------------------------------------------------
r145400 | grosser | 2011-11-29 22:50:47 +0800 (Tue, 29 Nov 2011) | 1 line

test: Add more dependences to cmake build
------------------------------------------------------------------------
r145076 | grosser | 2011-11-23 03:40:38 +0800 (Wed, 23 Nov 2011) | 3 lines

test: Do not hardcode '.so' as library suffix

Contributed by: Marcello Maggioni <hayarms@gmail.com>
------------------------------------------------------------------------
r145075 | grosser | 2011-11-23 03:40:34 +0800 (Wed, 23 Nov 2011) | 1 line

www: Document how to run 'make polly-test' for autoconf build
------------------------------------------------------------------------
r145074 | grosser | 2011-11-23 03:40:31 +0800 (Wed, 23 Nov 2011) | 4 lines

autoconf: Change order of linking files

This fixes (or hides) the problem of symbols not being available in the
autoconf build.
------------------------------------------------------------------------
r145073 | grosser | 2011-11-23 03:40:28 +0800 (Wed, 23 Nov 2011) | 1 line

OpenScop: Remove use of getNameStr()
------------------------------------------------------------------------
r145072 | grosser | 2011-11-23 03:40:24 +0800 (Wed, 23 Nov 2011) | 1 line

cmake: Create libPollyExchange as in the autoconf build
------------------------------------------------------------------------
r145071 | grosser | 2011-11-23 03:40:19 +0800 (Wed, 23 Nov 2011) | 4 lines

Register Passes: Use -polly-optimizer=(isl|pocc) to switch optimizers

This replaces the old option -polly-use-pocc. Also call the passes uniformly
-polly-opt-pocc and -polly-opt-isl.
------------------------------------------------------------------------
r144917 | grosser | 2011-11-18 03:10:48 +0800 (Fri, 18 Nov 2011) | 14 lines

RegisterPass: Disable Polly by default

We disable Polly by default and add a new option '-polly' that enables Polly.
This allows us to create an the alias

$ alias clang clang -Xclang -load -Xclang LLVMPolly.so

which loads Polly always into clang. It can now be enabled by running:

$ clang -O3 -mllvm -polly file.c

To enable it by default an alias pollycc can be create

$ alias pollycc clang -O3 -mllvm -polly
------------------------------------------------------------------------
r144909 | grosser | 2011-11-17 22:52:36 +0800 (Thu, 17 Nov 2011) | 4 lines

Do not use getNameStr() anymore.

Instead we switch to the recommended getName(). This fixes compilation with
recent versions of LLVM.
------------------------------------------------------------------------
r144908 | grosser | 2011-11-17 20:56:23 +0800 (Thu, 17 Nov 2011) | 1 line

autoconf: Specify that pollyanalysis depends on pollysupport
------------------------------------------------------------------------
r144907 | grosser | 2011-11-17 20:56:21 +0800 (Thu, 17 Nov 2011) | 1 line

SCEVValidator: Fix coding standards in ValidatorResult
------------------------------------------------------------------------
r144906 | grosser | 2011-11-17 20:56:19 +0800 (Thu, 17 Nov 2011) | 1 line

SCEVValidator: Make ValidatorResult a class and enforce the use of wproper accessors
------------------------------------------------------------------------
r144905 | grosser | 2011-11-17 20:56:17 +0800 (Thu, 17 Nov 2011) | 3 lines

SCEVValidator: Document SCEVType and ValidatorResult

Suggested by Sebastian Pop.
------------------------------------------------------------------------
r144904 | grosser | 2011-11-17 20:56:14 +0800 (Thu, 17 Nov 2011) | 3 lines

SCEVValidator: Restructure the logic of visitAddRecExpr

Suggested by Sebastian Pop.
------------------------------------------------------------------------
r144903 | grosser | 2011-11-17 20:56:12 +0800 (Thu, 17 Nov 2011) | 1 line

SCEVValidator: Fix typo
------------------------------------------------------------------------
r144902 | grosser | 2011-11-17 20:56:10 +0800 (Thu, 17 Nov 2011) | 3 lines

Fix placement of the '*' that marks a pointer

Suggested by Sebastian Pop.
------------------------------------------------------------------------
r144901 | grosser | 2011-11-17 20:56:06 +0800 (Thu, 17 Nov 2011) | 3 lines

RegisterPasses: Avoid double negation

Fix suggested by Sebastian Pop.
------------------------------------------------------------------------
r144900 | grosser | 2011-11-17 20:56:04 +0800 (Thu, 17 Nov 2011) | 1 line

ScheduleOptimizer: Start with an empty union_map and add elements
------------------------------------------------------------------------
r144899 | grosser | 2011-11-17 20:56:03 +0800 (Thu, 17 Nov 2011) | 5 lines

ScheduleOptimizer: Some style changes

- Use uppercase letters according to the LLVM coding style
- Rename functions to not include 'tiledSchedule', but just Schedule. This
  is more correct as tiling might be disabled.
------------------------------------------------------------------------
r144898 | grosser | 2011-11-17 20:56:00 +0800 (Thu, 17 Nov 2011) | 3 lines

ScheduleOptimizer: Use early exit

Style fix, noted by Sebastian Pop.
------------------------------------------------------------------------
r144643 | grosser | 2011-11-15 19:39:02 +0800 (Tue, 15 Nov 2011) | 1 line

ScopLib: Fix export/import after parameters are now tagged with isl_ids.
------------------------------------------------------------------------
r144642 | grosser | 2011-11-15 19:38:59 +0800 (Tue, 15 Nov 2011) | 7 lines

JSONImporter: Fix parameter ids when importing new access functions

The new isl_id support for parmeters created problems when importing new
access functions. Even though the parameters had the same names,
they were mapped to different ids and where therefore incompatible.
We copy the ids now from the old parameter dimensions. This fixes the
problem.
------------------------------------------------------------------------
r144641 | grosser | 2011-11-15 19:38:55 +0800 (Tue, 15 Nov 2011) | 5 lines

ScopInfo: Use names of simple parameters to name the isl parameter dimensions.

Parameters can be complex SCEV expressions, but they can also be single scalar
values. If a parameters is such a simple scalar value and the value is named,
use this name to name the isl parameter dimensions.
------------------------------------------------------------------------
r144640 | grosser | 2011-11-15 19:38:47 +0800 (Tue, 15 Nov 2011) | 1 line

Cloog: Copy parameter names from isl data structures
------------------------------------------------------------------------
r144639 | grosser | 2011-11-15 19:38:44 +0800 (Tue, 15 Nov 2011) | 1 line

JScop: Allow to update the context
------------------------------------------------------------------------
r144638 | grosser | 2011-11-15 19:38:36 +0800 (Tue, 15 Nov 2011) | 1 line

Make JScop export/reimport accessible from clang
------------------------------------------------------------------------
r144289 | grosser | 2011-11-10 22:01:53 +0800 (Thu, 10 Nov 2011) | 1 line

www: Remove link to LLVM for upper left corner. This confused a lot of people
------------------------------------------------------------------------
r144288 | grosser | 2011-11-10 22:00:04 +0800 (Thu, 10 Nov 2011) | 1 line

www: Add some news about Polly
------------------------------------------------------------------------
r144287 | grosser | 2011-11-10 22:00:00 +0800 (Thu, 10 Nov 2011) | 1 line

www: Highlight command line flags
------------------------------------------------------------------------
r144286 | grosser | 2011-11-10 21:21:43 +0800 (Thu, 10 Nov 2011) | 15 lines

ScopDetection: Do not verify Aliasing

This does not work reliable and is probably not needed. I accidentally changed
this in this recent commit:

commit a0bcd63c6ffa81616cf8c6663a87588803f7d91c
Author: grosser <grosser@91177308-0d34-0410-b5e6-96231b3b80d8>
Date:   Thu Nov 10 12:47:21 2011 +0000

    ScopDetect: Use INVALID macro to fail in case of aliasing

    This simplifies the code and also makes the error message available to the
    graphviz scop viewer.

    git-svn-id: https://llvm.org/svn/llvm-project/polly/trunk@144284
------------------------------------------------------------------------
r144285 | grosser | 2011-11-10 20:47:26 +0800 (Thu, 10 Nov 2011) | 1 line

ScopDetection: Add flag to ignore possible aliasing
------------------------------------------------------------------------
r144284 | grosser | 2011-11-10 20:47:21 +0800 (Thu, 10 Nov 2011) | 4 lines

ScopDetect: Use INVALID macro to fail in case of aliasing

This simplifies the code and also makes the error message available to
the graphviz scop viewer.
------------------------------------------------------------------------
r144283 | grosser | 2011-11-10 20:45:15 +0800 (Thu, 10 Nov 2011) | 1 line

ScopDetect: Clean the last failure message properly
------------------------------------------------------------------------
r144282 | grosser | 2011-11-10 20:45:11 +0800 (Thu, 10 Nov 2011) | 1 line

ScopDetection: Improve formatting of error message and simplify some code
------------------------------------------------------------------------
r144281 | grosser | 2011-11-10 20:45:07 +0800 (Thu, 10 Nov 2011) | 1 line

Add a workaround to fix SCoPs rejected because of 'region not simple'
------------------------------------------------------------------------
r144280 | grosser | 2011-11-10 20:45:03 +0800 (Thu, 10 Nov 2011) | 3 lines

Reuse the old BaseAddress checking in SCEVValidator to make sure that no base
address is part of the access function. Also remove unused special cases that
were necessery when the base address was still contained in the access function
------------------------------------------------------------------------
r144279 | grosser | 2011-11-10 20:44:55 +0800 (Thu, 10 Nov 2011) | 1 line

Use getBasePtr in TempScop/ScopInfo
------------------------------------------------------------------------
r144278 | grosser | 2011-11-10 20:44:50 +0800 (Thu, 10 Nov 2011) | 6 lines

ScopDetect: Use getPointerBase to get the base pointer

Previously we allowed in access functions only a single SCEVUnknown, which later
became the base address. We now use getPointerBase() to derive the base address
and all remaining unknowns are handled as parameters. This allows us to handle
cases like A[b+c];
------------------------------------------------------------------------
r144233 | grosser | 2011-11-10 06:35:19 +0800 (Thu, 10 Nov 2011) | 1 line

Remove unused function declaration
------------------------------------------------------------------------
r144232 | grosser | 2011-11-10 06:35:15 +0800 (Thu, 10 Nov 2011) | 1 line

Remove unused parameters from TempScop
------------------------------------------------------------------------
r144231 | grosser | 2011-11-10 06:35:09 +0800 (Thu, 10 Nov 2011) | 4 lines

TempScop: Rename SCEVAffFunc to IRAccess

The SCEVAffFunc is now only used to express memory accesses. Give it a proper
name and rework the class such that this is obvious.
------------------------------------------------------------------------
r144230 | grosser | 2011-11-10 06:35:05 +0800 (Thu, 10 Nov 2011) | 4 lines

Further remove now invalid SCEVAffFunc features.

This also removes the construction of MayAliasSets that became invalid when
removing the use of SCEVAffFunc.
------------------------------------------------------------------------
r144229 | grosser | 2011-11-10 06:35:00 +0800 (Thu, 10 Nov 2011) | 4 lines

Remove AffineSCEVIterator

We do not use it anymore. It was replaced by SCEVVisitors like the
SCEVValidator.
------------------------------------------------------------------------
r144228 | grosser | 2011-11-10 06:34:53 +0800 (Thu, 10 Nov 2011) | 4 lines

Do not check memory accesses additionally with isValidAffineFunction

This check was necessary because of the use AffineSCEVIterator in TempScopInfo.
As we removed this use recently it is not necessary any more.
------------------------------------------------------------------------
r144227 | grosser | 2011-11-10 06:34:48 +0800 (Thu, 10 Nov 2011) | 1 line

Remove more unused stuff from SCEVAffFunc
------------------------------------------------------------------------
r144226 | grosser | 2011-11-10 06:34:44 +0800 (Thu, 10 Nov 2011) | 1 line

Remove SCEVAffFunc from polly::Comparison
------------------------------------------------------------------------
r144224 | grosser | 2011-11-10 06:34:39 +0800 (Thu, 10 Nov 2011) | 1 line

Remove unused code from SCEVAffFunc constructor
------------------------------------------------------------------------
r144223 | grosser | 2011-11-10 06:34:34 +0800 (Thu, 10 Nov 2011) | 1 line

Remove more of SCEVAffineFunc
------------------------------------------------------------------------
r144222 | grosser | 2011-11-10 06:34:28 +0800 (Thu, 10 Nov 2011) | 1 line

ScopInfo: Use getParamsInAffineExpr to get the BaseAddress
------------------------------------------------------------------------
r144221 | grosser | 2011-11-10 06:34:24 +0800 (Thu, 10 Nov 2011) | 1 line

TempScop: Remove more of the buildAffineFunction
------------------------------------------------------------------------
r144220 | grosser | 2011-11-10 06:34:18 +0800 (Thu, 10 Nov 2011) | 1 line

TempScopInfo: Remove unneeded construction of SCEVAffFunc
------------------------------------------------------------------------
r144192 | grosser | 2011-11-10 01:44:03 +0800 (Thu, 10 Nov 2011) | 1 line

www: Fix install location of cloog in the installation guide.
------------------------------------------------------------------------
r144087 | grosser | 2011-11-08 23:41:28 +0800 (Tue, 08 Nov 2011) | 7 lines

Detect Parameters directly on the SCEV.

Instead of using TempScop to find parameters, we detect them directly
on the SCEV. This allows us to remove the TempScop parameter detection
in a subsequent commit.

This fixes a bug reported by Marcello Maggioni <hayarms@gmail.com>
------------------------------------------------------------------------
r144086 | grosser | 2011-11-08 23:41:19 +0800 (Tue, 08 Nov 2011) | 1 line

Remove const
------------------------------------------------------------------------
r144085 | grosser | 2011-11-08 23:41:13 +0800 (Tue, 08 Nov 2011) | 6 lines

ScopInfo: Don't add common parameters during realignment to the context.

Previously we built a context that contained already all parameter dimensions
from the start. We now build a context without any parameter dimensions and
extend the context as needed. All parameter dimensions are added during final
realignment.
------------------------------------------------------------------------
r144084 | grosser | 2011-11-08 23:41:08 +0800 (Tue, 08 Nov 2011) | 1 line

ScopInfo: Realign parameters after the scop is built
------------------------------------------------------------------------
r144083 | grosser | 2011-11-08 23:41:03 +0800 (Tue, 08 Nov 2011) | 1 line

Use a map to store the dimension of the the parameters
------------------------------------------------------------------------
r143961 | grosser | 2011-11-07 20:58:59 +0800 (Mon, 07 Nov 2011) | 1 line

ScopInfo: Extract function getIdForParam()
------------------------------------------------------------------------
r143960 | grosser | 2011-11-07 20:58:54 +0800 (Mon, 07 Nov 2011) | 1 line

SCEVValidator: Move into own file
------------------------------------------------------------------------
r143959 | grosser | 2011-11-07 20:58:46 +0800 (Mon, 07 Nov 2011) | 9 lines

ScopDetection: Introduce methods to check attributes of ValidatorResult

This simplifies e.g:

if (Op.type == SCEVType::INT || Op.type == SCEVType::PARAM)

  to

if (Op.isConstant())
------------------------------------------------------------------------
r143958 | grosser | 2011-11-07 20:58:41 +0800 (Mon, 07 Nov 2011) | 1 line

ScopDetection: Add ValidatorResult class
------------------------------------------------------------------------
r143692 | grosser | 2011-11-04 18:08:08 +0800 (Fri, 04 Nov 2011) | 3 lines

ScopDetection: Small fixes and improvements for the SCEVValidator

These fixes were part of a code audit of the SCEVValidator.
------------------------------------------------------------------------
r143691 | grosser | 2011-11-04 18:08:03 +0800 (Fri, 04 Nov 2011) | 3 lines

ScopInfo: Add two new asserts.

They show a bug recently reported by Marcello Maggioni <hayarms@gmail.com>
------------------------------------------------------------------------
r143654 | grosser | 2011-11-04 05:03:18 +0800 (Fri, 04 Nov 2011) | 5 lines

ScopDetection: Use SCEVValidator for memory accesses.

We currently run the old memory access checker in parallel, as we would
otherwise fail in TempScop because of currently unsupported functions. We will
remove the old memory access checker as soon as TempScop is fixed.
------------------------------------------------------------------------
r143653 | grosser | 2011-11-04 05:03:14 +0800 (Fri, 04 Nov 2011) | 1 line

ScopDetection: Use SCEVValidator for conditions
------------------------------------------------------------------------
r143652 | grosser | 2011-11-04 05:03:10 +0800 (Fri, 04 Nov 2011) | 1 line

TempScop: Remove unused SCEVAffFunc constructor
------------------------------------------------------------------------
r143651 | grosser | 2011-11-04 05:03:06 +0800 (Fri, 04 Nov 2011) | 1 line

TempScop: Remove has_signed (was unused)
------------------------------------------------------------------------
r143650 | grosser | 2011-11-04 05:03:01 +0800 (Fri, 04 Nov 2011) | 1 line

ScopDetection: A parameter cannot appear inside a SCoP.
------------------------------------------------------------------------
r143576 | grosser | 2011-11-03 05:40:08 +0800 (Thu, 03 Nov 2011) | 7 lines

ScopDetection: Add new SCEV Validator

The SCEV Validator is used to check if the bound of a loop can be translated
into a polyhedral constraint. The new validator is more general as the check
used previously and e.g. allows bounds like 'smax 1, %a'. At the moment, we
only allow signed comparisons. Also, the new validator is only used to verify
loop bounds. Memory accesses are still handled by the old validator.
------------------------------------------------------------------------
r143575 | grosser | 2011-11-03 05:37:51 +0800 (Thu, 03 Nov 2011) | 3 lines

TempScop: Remove SCEVAffFunc from LoopBoundInfo

This is not needed anymore -> Reduce impact of SCEVAffFunc.
------------------------------------------------------------------------
r143574 | grosser | 2011-11-03 05:37:06 +0800 (Thu, 03 Nov 2011) | 3 lines

TempScopInfo: Print the original SCEV instead of using SCEVAffFunc

This is reducing the impact of SCEVAffFunc
------------------------------------------------------------------------
r143025 | raghesh | 2011-10-26 20:25:49 +0800 (Wed, 26 Oct 2011) | 3 lines

www: Change in cloog installation procedure


------------------------------------------------------------------------
r143008 | grosser | 2011-10-26 10:14:40 +0800 (Wed, 26 Oct 2011) | 3 lines

Add forgotten -Xclang option

Reported by: yabin.hwu@gmail.com
------------------------------------------------------------------------
r143007 | grosser | 2011-10-26 10:09:11 +0800 (Wed, 26 Oct 2011) | 1 line

www: reformat warning
------------------------------------------------------------------------
r143005 | grosser | 2011-10-26 09:27:53 +0800 (Wed, 26 Oct 2011) | 1 line

www: Emphasize clang/LLVM/Polly need to be in sync
------------------------------------------------------------------------
r143004 | grosser | 2011-10-26 09:27:49 +0800 (Wed, 26 Oct 2011) | 1 line

ScopInfo: Print SCEV and not the pointer to it
------------------------------------------------------------------------
r142777 | grosser | 2011-10-24 04:59:49 +0800 (Mon, 24 Oct 2011) | 4 lines

PoCC: Fix bugs when executing PoCC

These are remainders of the switch to the newer isl version. At the point of
switching I did not test with PoCC support. I should have done. ;-)
------------------------------------------------------------------------
r142776 | grosser | 2011-10-24 04:59:47 +0800 (Mon, 24 Oct 2011) | 5 lines

Remove pollycc

The recommanded and supported way to use Polly is to load it into clang.
Documentation for this is available on the website under
http://polly.grosser.es/example_load_Polly_into_clang.html
------------------------------------------------------------------------
r142775 | grosser | 2011-10-24 04:59:44 +0800 (Mon, 24 Oct 2011) | 3 lines

Only have a single option to disable tiling for both isl and Pocc optimzer

This also documents the new option on the website.
------------------------------------------------------------------------
r142774 | grosser | 2011-10-24 04:59:40 +0800 (Mon, 24 Oct 2011) | 3 lines

Enable prevectorization with -enable-polly-vector.

This removes the separate prevector options for the Pluto and isl scheduler.
------------------------------------------------------------------------
r142773 | grosser | 2011-10-24 04:59:35 +0800 (Mon, 24 Oct 2011) | 1 line

Add an option to run the PoCC optimizer
------------------------------------------------------------------------
r142772 | grosser | 2011-10-24 04:59:32 +0800 (Mon, 24 Oct 2011) | 3 lines

Allow to disable the schedule optimizer

The option -polly-no-optimizer disables the scheduling optimizer.
------------------------------------------------------------------------
r142771 | grosser | 2011-10-24 04:59:29 +0800 (Mon, 24 Oct 2011) | 1 line

Rename -enable-schedule-prevector to -polly-prevector
------------------------------------------------------------------------
r142770 | grosser | 2011-10-24 04:59:26 +0800 (Mon, 24 Oct 2011) | 1 line

ScheduleOptimizer: Allow to disable tiling
------------------------------------------------------------------------
r142769 | grosser | 2011-10-24 04:59:24 +0800 (Mon, 24 Oct 2011) | 1 line

ScopLib: Fix memory issues
------------------------------------------------------------------------
r142768 | grosser | 2011-10-24 04:59:20 +0800 (Mon, 24 Oct 2011) | 1 line

ScopInfo: Remove unneeded code
------------------------------------------------------------------------
r142767 | grosser | 2011-10-24 04:59:17 +0800 (Mon, 24 Oct 2011) | 1 line

Fix compilation of Polly with scoplib support
------------------------------------------------------------------------
r142766 | grosser | 2011-10-24 04:59:14 +0800 (Mon, 24 Oct 2011) | 3 lines

Rename -enable-polly-viewer to -polly-run-viewer

Similar changes for polly-only-viewer, polly-printer and polly-only-printer.
------------------------------------------------------------------------
r142765 | grosser | 2011-10-24 04:59:11 +0800 (Mon, 24 Oct 2011) | 1 line

RegisterPasses: Allow to disable code generation.
------------------------------------------------------------------------
r142750 | grosser | 2011-10-23 19:17:06 +0800 (Sun, 23 Oct 2011) | 4 lines

ScopDetection: Allow to limit the scop detection to a single function

-polly-detect-only=<functionname> allows to limit the scop detection to
a single function.
------------------------------------------------------------------------
r142749 | grosser | 2011-10-23 19:03:06 +0800 (Sun, 23 Oct 2011) | 1 line

Fix buildbot link
------------------------------------------------------------------------
r142748 | grosser | 2011-10-23 19:01:07 +0800 (Sun, 23 Oct 2011) | 1 line

Link to the new LLVM buildbots
------------------------------------------------------------------------
r142747 | grosser | 2011-10-23 18:57:53 +0800 (Sun, 23 Oct 2011) | 1 line

www: Describe how to load Polly into clang
------------------------------------------------------------------------
r142746 | grosser | 2011-10-23 18:57:49 +0800 (Sun, 23 Oct 2011) | 1 line

www: Move example into its own section (making room for another one)
------------------------------------------------------------------------
r142745 | grosser | 2011-10-23 18:57:44 +0800 (Sun, 23 Oct 2011) | 1 line

Add CloogInfo debug output.
------------------------------------------------------------------------
r142744 | grosser | 2011-10-23 18:39:40 +0800 (Sun, 23 Oct 2011) | 1 line

Update to isl 0.08
------------------------------------------------------------------------
r142184 | grosser | 2011-10-17 16:32:36 +0800 (Mon, 17 Oct 2011) | 3 lines

ScopInfo: Fix ctx->ref != 0 problem

Reported by: Yabin Hu <yabin.hwu@gmail.com>
------------------------------------------------------------------------
r141461 | grosser | 2011-10-08 08:49:30 +0800 (Sat, 08 Oct 2011) | 1 line

ScopDetection: Improve error messages and add another INVALID case.
------------------------------------------------------------------------
r141459 | grosser | 2011-10-08 08:35:17 +0800 (Sat, 08 Oct 2011) | 1 line

ScopInfo: Proporly free the local space
------------------------------------------------------------------------
r141458 | grosser | 2011-10-08 08:30:55 +0800 (Sat, 08 Oct 2011) | 1 line

Show the reason a region is not a SCoP in the DOT graphs.
------------------------------------------------------------------------
r141457 | grosser | 2011-10-08 08:30:48 +0800 (Sat, 08 Oct 2011) | 1 line

ScopDetection: Unify the handling of invalid SCoPs
------------------------------------------------------------------------
r141456 | grosser | 2011-10-08 08:30:44 +0800 (Sat, 08 Oct 2011) | 1 line

Add flags to run the Polly Printers/Viewers
------------------------------------------------------------------------
r141455 | grosser | 2011-10-08 08:30:40 +0800 (Sat, 08 Oct 2011) | 1 line

Initialize the passes early and properly.
------------------------------------------------------------------------
r141361 | grosser | 2011-10-07 16:46:57 +0800 (Fri, 07 Oct 2011) | 6 lines

ScopInfo: Some cleanups

- Use __isl_give and __isl_take
- Convert variables to start with Uppercase letter
- Only assign the 'domain' after it is fully constructed
- Only name it after it is fully constructed
------------------------------------------------------------------------
r141359 | grosser | 2011-10-07 15:20:43 +0800 (Fri, 07 Oct 2011) | 4 lines

Switch to the most recent version of ISL.

This switch is not for any new features, but to test have Polly tested with
the upcoming isl 0.8.
------------------------------------------------------------------------
r141325 | grosser | 2011-10-07 06:32:58 +0800 (Fri, 07 Oct 2011) | 1 line

ScopInfo: Simplify the construction of the iteration domain.
------------------------------------------------------------------------
r141303 | grosser | 2011-10-07 02:49:37 +0800 (Fri, 07 Oct 2011) | 1 line

Change location of our buildbot
------------------------------------------------------------------------
r141275 | grosser | 2011-10-06 14:53:17 +0800 (Thu, 06 Oct 2011) | 3 lines

Address Sebastians comments

This also adds some other cleanups I performed on my way.
------------------------------------------------------------------------
r141257 | grosser | 2011-10-06 08:04:11 +0800 (Thu, 06 Oct 2011) | 5 lines

ScopInfo: Only give away a copy of the access relation.

Also take the chance and rename access functions to access relations. This is
because we do not only allow plain functions to describe an access, but we
can have any access relation that can be described with linear constraints.
------------------------------------------------------------------------
r141256 | grosser | 2011-10-06 08:04:05 +0800 (Thu, 06 Oct 2011) | 1 line

ScopInfo: Only give away a copy of the schedule.
------------------------------------------------------------------------
r141255 | grosser | 2011-10-06 08:03:59 +0800 (Thu, 06 Oct 2011) | 1 line

ScopInfo: Only give away a copy of the Context
------------------------------------------------------------------------
r141254 | grosser | 2011-10-06 08:03:54 +0800 (Thu, 06 Oct 2011) | 1 line

ScopInfo: Get the isl_ctx always with getIslCtx()
------------------------------------------------------------------------
r141253 | grosser | 2011-10-06 08:03:48 +0800 (Thu, 06 Oct 2011) | 1 line

ScopInfo: Use separate function to build context
------------------------------------------------------------------------
r141252 | grosser | 2011-10-06 08:03:42 +0800 (Thu, 06 Oct 2011) | 3 lines

Export the parameter space directly from the SCoP.

Use this to simplify some code.
------------------------------------------------------------------------
r141251 | grosser | 2011-10-06 08:03:35 +0800 (Thu, 06 Oct 2011) | 5 lines

Adapt to introduction of isl_space

Polly should now be compiled with CLooG 0c252c88946b27b7b61a1a8d8fd7f94d2461dbfd
and isl 56b7d238929980e62218525b4b3be121af386edf. The most convenient way to
update is utils/checkout_cloog.sh.
------------------------------------------------------------------------
r141242 | grosser | 2011-10-06 07:11:17 +0800 (Thu, 06 Oct 2011) | 1 line

checkout_cloog: Fix this script to run on our buildbot.
------------------------------------------------------------------------
r141213 | grosser | 2011-10-06 05:11:30 +0800 (Thu, 06 Oct 2011) | 1 line

Add forgotten "
------------------------------------------------------------------------
r141212 | grosser | 2011-10-06 05:10:10 +0800 (Thu, 06 Oct 2011) | 5 lines

Add a tool to checkout cloog/isl automatically with the correct versions.

The tool is called checkout_cloog.sh. We also update the get_started
documentation to include this tool. An older unfinished tool called
'get_cloog.sh' is removed to avoid confusion.
------------------------------------------------------------------------
r141070 | grosser | 2011-10-04 16:08:43 +0800 (Tue, 04 Oct 2011) | 1 line

Point to our own buildbot until the official one is up again.
------------------------------------------------------------------------
r141069 | grosser | 2011-10-04 15:53:21 +0800 (Tue, 04 Oct 2011) | 1 line

Test: Convert to new exception handling
------------------------------------------------------------------------
r141068 | grosser | 2011-10-04 14:56:36 +0800 (Tue, 04 Oct 2011) | 1 line

Remove some empty lines
------------------------------------------------------------------------
r141067 | grosser | 2011-10-04 14:55:03 +0800 (Tue, 04 Oct 2011) | 3 lines

configure: Add gmp_inc when checking for CLooG

Otherwise configure fails if gmp is installed in a non default location.
------------------------------------------------------------------------
r139363 | grosser | 2011-09-09 19:02:10 +0800 (Fri, 09 Sep 2011) | 1 line

Also force a fixed version of cloog
------------------------------------------------------------------------
r139362 | grosser | 2011-09-09 17:08:09 +0800 (Fri, 09 Sep 2011) | 1 line

Change installation instruction to use a fixed isl version
------------------------------------------------------------------------
r139097 | grosser | 2011-09-04 19:45:52 +0800 (Sun, 04 Sep 2011) | 1 line

CodeGen: Support for Cast Operations in vector code generation
------------------------------------------------------------------------
r139096 | grosser | 2011-09-04 19:45:45 +0800 (Sun, 04 Sep 2011) | 1 line

CodeGen: Remove unused code
------------------------------------------------------------------------
r139095 | grosser | 2011-09-04 19:45:41 +0800 (Sun, 04 Sep 2011) | 1 line

CodeGen: Better separate scalar and vector code generation.
------------------------------------------------------------------------
r139094 | grosser | 2011-09-04 19:45:34 +0800 (Sun, 04 Sep 2011) | 1 line

CodeGeneration: Simplify code, fix style.
------------------------------------------------------------------------
r139093 | grosser | 2011-09-04 19:45:29 +0800 (Sun, 04 Sep 2011) | 1 line

CodeGen: Split large function in smaller ones.
------------------------------------------------------------------------
r139092 | grosser | 2011-09-04 19:45:22 +0800 (Sun, 04 Sep 2011) | 6 lines

CodeGen: Improve naming of copied basic blocks

It may happen that we generate the code of a basic block from the original
scop is code generated several times. The new naming scheme reduces confusing
that earlier appeared as the version numbers of the new basic blocks could
have been interpreted as part of the name of the original basic block.
------------------------------------------------------------------------
r138555 | grosser | 2011-08-25 16:40:59 +0800 (Thu, 25 Aug 2011) | 5 lines

Fix crashes due to unaligned parameters

Due to the recent introduction of isl_id, parameters need now always to be
aligned. This was not yet taken care of in the code path of vectorization and
dependence analysis.
------------------------------------------------------------------------
r138554 | grosser | 2011-08-25 16:40:52 +0800 (Thu, 25 Aug 2011) | 1 line

ScheduleOptimizer: Fix another memleak
------------------------------------------------------------------------
r138428 | grosser | 2011-08-24 15:33:05 +0800 (Wed, 24 Aug 2011) | 1 line

RegisterPasses: Rework comments slightly
------------------------------------------------------------------------
r138402 | grosser | 2011-08-24 06:35:38 +0800 (Wed, 24 Aug 2011) | 14 lines

Register Polly passes automatically

Polly adds, after it is loaded into opt or clang, its passes to the default set
of -O3 passes. This means optimizing a program with clang and Polly becomes as
simple as executing.

clang -Xclang -load -Xclang lib/LLVMPolly.so -O3 program.c

The same should work for dragonegg powered gfortran, g++, ... or any other tool
that uses the PassManagerBuilder.

Warning: Even though using Polly became with this commit extremly easy, Polly
         is still Pre-Alpha Quality. This means in most cases it will rather
         destroy the world than doing anything positive. ;-)
------------------------------------------------------------------------
r138401 | grosser | 2011-08-24 06:35:23 +0800 (Wed, 24 Aug 2011) | 1 line

ScheduleOptimizer: Fix another memory leak
------------------------------------------------------------------------
r138400 | grosser | 2011-08-24 06:35:08 +0800 (Wed, 24 Aug 2011) | 1 line

Add some forgotten passes to LinkAllPasses
------------------------------------------------------------------------
r138326 | grosser | 2011-08-23 20:31:17 +0800 (Tue, 23 Aug 2011) | 1 line

Add information about polyhedral phone call.
------------------------------------------------------------------------
r138325 | grosser | 2011-08-23 20:31:14 +0800 (Tue, 23 Aug 2011) | 3 lines

ScheduleOptimizer: Fix some memory errors.

This fixes reference counting if the schedule optimizer is used.
------------------------------------------------------------------------
r138219 | grosser | 2011-08-21 22:57:58 +0800 (Sun, 21 Aug 2011) | 8 lines

Temporarily remove reduction support and interchange pass

I am planning to eliminate the TempScopInfo pass. To simplify this I remove
some features that may later be added to the ScopInfo pass.

The interchange pass is currently strongly tested and furthermore ment to be
replaced by the general scheduling optimizer. Reductions itself can later
be added easily.
------------------------------------------------------------------------
r138204 | grosser | 2011-08-20 19:11:25 +0800 (Sat, 20 Aug 2011) | 6 lines

Free isl_ctx and fix several memory leaks

Because of me not understanding the LLVM pass structure well, I did not find a
good way to allocate isl_ctx and to free it later without getting issues with
reference counting. I now found this place, such that we can free isl_ctx. This
patch also fixes the memory leaks that were ignored beforehand.
------------------------------------------------------------------------
r138203 | grosser | 2011-08-20 19:11:18 +0800 (Sat, 20 Aug 2011) | 1 line

GICHelper: Fix memory leaks, as we forgot to free some strings.
------------------------------------------------------------------------
r138202 | grosser | 2011-08-20 19:11:14 +0800 (Sat, 20 Aug 2011) | 1 line

Move common code into the function it belongs to
------------------------------------------------------------------------
r138155 | grosser | 2011-08-20 08:03:28 +0800 (Sat, 20 Aug 2011) | 1 line

ScopInfo/Dependences: Use parameter ids everywhere
------------------------------------------------------------------------
r138147 | grosser | 2011-08-20 07:34:28 +0800 (Sat, 20 Aug 2011) | 3 lines

ScopInfo: Construct the accessrelations with isl_pw_aff

This simplifies the code quite a bit.
------------------------------------------------------------------------
r137932 | grosser | 2011-08-18 15:51:40 +0800 (Thu, 18 Aug 2011) | 8 lines

ScopInfo: Remove adhoc comparision of affine expressions

Until today, we compared two affine expressions by defining two maps describing
them, creating an union of those maps, adding constraints that do the comparison
and projecting out unneeded dimensions.

This was simplified to using the isl_pw_aff representation of the affine
expressions and using the relevant isl functions to compare them.
------------------------------------------------------------------------
r137931 | grosser | 2011-08-18 15:51:37 +0800 (Thu, 18 Aug 2011) | 4 lines

ScopInfo: Create all isl data structures with dimension ids

At the moment, we still remove the ids after all data structures are created,
as later passes do not yet support ids. This limitation will be removed later.
------------------------------------------------------------------------
r137930 | grosser | 2011-08-18 14:31:50 +0800 (Thu, 18 Aug 2011) | 5 lines

ScopInfo: Build isl_pw_aff directly from SCEV.

Do not use AffFunc to derive the affine expressions, but use isl_pw_aff to
analyze the original SCEV directly. This will allow several simplifications in
follow up patches, with the final goal of removing AffFunc completely.
------------------------------------------------------------------------
r137929 | grosser | 2011-08-18 14:31:46 +0800 (Thu, 18 Aug 2011) | 1 line

ScopInfo: Simplify code
------------------------------------------------------------------------
r137928 | grosser | 2011-08-18 14:31:43 +0800 (Thu, 18 Aug 2011) | 1 line

TempSCoP: Store SCEV a SCEVAffFunc was derived from
------------------------------------------------------------------------
r137927 | grosser | 2011-08-18 14:29:25 +0800 (Thu, 18 Aug 2011) | 1 line

TempScopInfo: Improve formatiing
------------------------------------------------------------------------
r137607 | raghesh | 2011-08-15 17:37:46 +0800 (Mon, 15 Aug 2011) | 3 lines

www: Updating memaccess Documentation


------------------------------------------------------------------------
r137603 | raghesh | 2011-08-15 10:33:39 +0800 (Mon, 15 Aug 2011) | 6 lines

Memaccess: Code generation for constant access function change

Support for generating code for an access function change which is
a constant is added. 


------------------------------------------------------------------------
r137304 | raghesh | 2011-08-11 16:44:56 +0800 (Thu, 11 Aug 2011) | 3 lines

Removing some trailing whitespaces


------------------------------------------------------------------------
r137043 | raghesh | 2011-08-08 16:34:16 +0800 (Mon, 08 Aug 2011) | 3 lines

Memaccess: Some style changes


------------------------------------------------------------------------
r136789 | raghesh | 2011-08-04 01:02:50 +0800 (Thu, 04 Aug 2011) | 7 lines

Memaccess: Codegeneration for a simple access function change

Code is generated for a simple access function change imported
from JSCOP file. An access of A[i] is changed to A[0]. The code
for A[0] is generated directly without refering to isl function calls.


------------------------------------------------------------------------
r136774 | raghesh | 2011-08-03 21:47:59 +0800 (Wed, 03 Aug 2011) | 6 lines

Memaccess: Display Changed Access Relation

The changed access relations imported from JSCOP file is shown
as output of -analyze pass.


------------------------------------------------------------------------
r136750 | grosser | 2011-08-03 08:12:11 +0800 (Wed, 03 Aug 2011) | 2 lines

ScopInfo: Do not use >"< in statement names.
Signed-off-by: Tobias Grosser <tobias@grosser.es>
------------------------------------------------------------------------
r136749 | grosser | 2011-08-03 08:09:49 +0800 (Wed, 03 Aug 2011) | 3 lines

Dependences: Fix memory corruption.

Signed-off-by: Tobias Grosser <tobias@grosser.es>
------------------------------------------------------------------------
r136685 | grosser | 2011-08-02 15:22:05 +0800 (Tue, 02 Aug 2011) | 3 lines

Add a vect target to the polly testsuite

Contributed by: Sebastian Pop <sebpop@gmail.com>
------------------------------------------------------------------------
r136657 | grosser | 2011-08-02 06:39:00 +0800 (Tue, 02 Aug 2011) | 3 lines

Fix two compiler warnings

One of them actually pointed to an invalid condition in an assert.
------------------------------------------------------------------------
r135641 | raghesh | 2011-07-21 08:08:23 +0800 (Thu, 21 Jul 2011) | 3 lines

www: Memory Access Documentation Update


------------------------------------------------------------------------
r135428 | grosser | 2011-07-19 05:27:42 +0800 (Tue, 19 Jul 2011) | 3 lines

www: Fix typo

Reported by: Chad Rosier <mcrosier@apple.com>
------------------------------------------------------------------------
r135421 | grosser | 2011-07-19 04:34:41 +0800 (Tue, 19 Jul 2011) | 1 line

www: Mention new Polly Builder in News
------------------------------------------------------------------------
r135387 | grosser | 2011-07-18 19:00:13 +0800 (Mon, 18 Jul 2011) | 1 line

www: Add link to buildbot into main menu
------------------------------------------------------------------------
r135385 | grosser | 2011-07-18 17:53:35 +0800 (Mon, 18 Jul 2011) | 1 line

www: Buildbot set up
------------------------------------------------------------------------
r135384 | grosser | 2011-07-18 17:53:32 +0800 (Mon, 18 Jul 2011) | 1 line

Use llvm::*Type without const
------------------------------------------------------------------------
r135345 | chapuni | 2011-07-16 21:30:03 +0800 (Sat, 16 Jul 2011) | 1 line

(Test commit for polly)
------------------------------------------------------------------------
r135340 | raghesh | 2011-07-16 12:55:09 +0800 (Sat, 16 Jul 2011) | 6 lines

Memaccess: Bugfix-Reading of JSCoP file fails

While iterating through the memory accesses in JSCOP file
the inner loop index was not initialized to zero.


------------------------------------------------------------------------
r135321 | grosser | 2011-07-16 06:54:41 +0800 (Sat, 16 Jul 2011) | 6 lines

CodeGeneration: Adjust call to CreateCall.

Needed to avoid compile error after the patch "Convert CallInst and
InvokeInst APIs to use ArrayRef.

Contributed by: Sebastian Pop <sebpop@gmail.com>
------------------------------------------------------------------------
r134991 | raghesh | 2011-07-13 01:14:03 +0800 (Wed, 13 Jul 2011) | 6 lines

MemAccess: Reading Change in Access Function

This patch reads the change in access functions from
imported JSCOP file. A test case is also added.


------------------------------------------------------------------------
r134981 | grosser | 2011-07-12 20:43:00 +0800 (Tue, 12 Jul 2011) | 1 line

www: Fix typo
------------------------------------------------------------------------
r134980 | grosser | 2011-07-12 20:42:54 +0800 (Tue, 12 Jul 2011) | 4 lines

Adapt to LLVM type system changes

Remove constness of Types and do not name the structures generated in the OpenMP
code.
------------------------------------------------------------------------
r134786 | raghesh | 2011-07-09 11:10:22 +0800 (Sat, 09 Jul 2011) | 6 lines

Fix for broken build

isl/map.h is included in OpenScopExporter.cpp and
OpenScopImporter.cpp


------------------------------------------------------------------------
r134513 | grosser | 2011-07-07 02:05:05 +0800 (Thu, 07 Jul 2011) | 1 line

ScopLib: Add missing include
------------------------------------------------------------------------
r134512 | grosser | 2011-07-07 02:04:59 +0800 (Thu, 07 Jul 2011) | 1 line

pollycc: Fix error message if PoCC/Pluto are not available
------------------------------------------------------------------------
r134448 | grosser | 2011-07-06 06:15:53 +0800 (Wed, 06 Jul 2011) | 4 lines

ScheduleOpt: Fix some bugs

isl changed a function name, we did not properly initialize some variables
and we freed an isl_ctx object.
------------------------------------------------------------------------
r134435 | grosser | 2011-07-06 03:13:41 +0800 (Wed, 06 Jul 2011) | 1 line

www/memaccess: Fix forgotten typo
------------------------------------------------------------------------
r134434 | grosser | 2011-07-06 03:13:31 +0800 (Wed, 06 Jul 2011) | 4 lines

CodeGen: Adapt to change of PHI operand storage

Commit 133435 "Change how PHINodes store their operands" broke Polly. Fix this
breakage by adapting to the changes in the commit.
------------------------------------------------------------------------
r134432 | grosser | 2011-07-06 03:13:21 +0800 (Wed, 06 Jul 2011) | 4 lines

test: Do not pipe the .ll file into opt

The construct '< %s' complicates debugging with gdb --args as the content of
%s is interpreted as gdb input.
------------------------------------------------------------------------
r134429 | raghesh | 2011-07-06 02:51:34 +0800 (Wed, 06 Jul 2011) | 6 lines

www: Updating memaccess documentation

This is a complete rewrite to memaccess.html file. This removed
some unwanted html tags.


------------------------------------------------------------------------
r134400 | grosser | 2011-07-05 07:18:17 +0800 (Tue, 05 Jul 2011) | 4 lines

test: Remove redundant function definition

The latest version of LLVM fails, if a function is defined twice in an LLVM
bitcode file.
------------------------------------------------------------------------
r134187 | grosser | 2011-07-01 04:29:20 +0800 (Fri, 01 Jul 2011) | 4 lines

ScheduleOpt: Prevectorize the innermost parallel loop

Only prevectorize loops that are actually parallel and can
be vectorized. Take the innermost loop that is eligible.
------------------------------------------------------------------------
r134186 | grosser | 2011-07-01 04:29:13 +0800 (Fri, 01 Jul 2011) | 4 lines

ScheduleOpt: Add first version of prevectorization

We just strip-mine the innermost dimension by the vector width. This does not
take into account if this dimension is parallel nor if it is constant.
------------------------------------------------------------------------
r134181 | grosser | 2011-07-01 04:01:02 +0800 (Fri, 01 Jul 2011) | 10 lines

ScheduleOpt: Use band forest to get the schedules

isl introduced a new representation for the schedules it calculates. The new
representation uses a forest of bands and is closer to the structure of the
data as the old interface. Switch to the new interface, as it is nicer to use
and as the old interface will soon be removed from isl.

WARNING: This commit needs a version of isl that is more recent that the one
         included in CLooG. See:
	 http://polly.grosser.es/get_started.html#islTrunk
------------------------------------------------------------------------
r134180 | grosser | 2011-07-01 03:50:04 +0800 (Fri, 01 Jul 2011) | 4 lines

Buildsystem: Add -no-rtti

Build Polly without run time type info (rtti), as otherwise Polly cannot be
loaded into a LLVM that is built without rtti.
------------------------------------------------------------------------
r134179 | grosser | 2011-07-01 03:39:10 +0800 (Fri, 01 Jul 2011) | 3 lines

CodeGeneration: Adapt to SCEVExpander change

Reported-By: Sebastian Pop <sebpop@gmail.com>
------------------------------------------------------------------------
r134158 | grosser | 2011-06-30 22:43:35 +0800 (Thu, 30 Jun 2011) | 1 line

www: Fix typos.
------------------------------------------------------------------------
r134156 | grosser | 2011-06-30 22:32:33 +0800 (Thu, 30 Jun 2011) | 1 line

www/contributers: Add founding through Google Doctoral Fellowship
------------------------------------------------------------------------
r134153 | grosser | 2011-06-30 22:07:35 +0800 (Thu, 30 Jun 2011) | 1 line

www/get_started: Explain when PoCC is needed
------------------------------------------------------------------------
r134152 | grosser | 2011-06-30 22:07:23 +0800 (Thu, 30 Jun 2011) | 4 lines

www: How to use most recent version of isl

In some cases it is necessary to use a version of isl that is more recent than
the one included with CLooG. Point out what is needed to get such a version.
------------------------------------------------------------------------
r133354 | raghesh | 2011-06-19 01:17:16 +0800 (Sun, 19 Jun 2011) | 3 lines

www: Adding webpage to track memory access transformation


------------------------------------------------------------------------
r133353 | raghesh | 2011-06-19 01:09:33 +0800 (Sun, 19 Jun 2011) | 3 lines

www: Adding link to memaccess.html


------------------------------------------------------------------------
r132761 | grosser | 2011-06-09 06:46:40 +0800 (Thu, 09 Jun 2011) | 1 line

www: Fix path to git repository.
------------------------------------------------------------------------
r132755 | grosser | 2011-06-09 01:36:11 +0800 (Thu, 09 Jun 2011) | 1 line

www: Allow file listing in directory of example files.
------------------------------------------------------------------------
r132678 | grosser | 2011-06-06 23:50:09 +0800 (Mon, 06 Jun 2011) | 1 line

www: Add website for the LLVM bugtracker use
------------------------------------------------------------------------
r132120 | grosser | 2011-05-26 20:20:16 +0800 (Thu, 26 May 2011) | 1 line

www: Enable SSI on the webserver.
------------------------------------------------------------------------
r131964 | grosser | 2011-05-24 21:56:06 +0800 (Tue, 24 May 2011) | 3 lines

www: Use absolute links

Like this the menu can also be used in subdirectories.
------------------------------------------------------------------------
r131963 | grosser | 2011-05-24 21:29:23 +0800 (Tue, 24 May 2011) | 1 line

www: Add documentation.html
------------------------------------------------------------------------
r131962 | grosser | 2011-05-24 21:15:01 +0800 (Tue, 24 May 2011) | 1 line

www: Add a separarate documentation section.
------------------------------------------------------------------------
r131960 | grosser | 2011-05-24 20:20:07 +0800 (Tue, 24 May 2011) | 5 lines

ScheduleOptimizer: Declare functions static

Functions that are currently only used in this file can be declared static.

Suggested by: ether
------------------------------------------------------------------------
r131959 | grosser | 2011-05-24 20:20:00 +0800 (Tue, 24 May 2011) | 3 lines

www: Add two publications

Tobias' diploma thesis and Raghesh's master thesis.
------------------------------------------------------------------------
r131898 | grosser | 2011-05-23 23:23:36 +0800 (Mon, 23 May 2011) | 3 lines

CodeGeneration: Use FIXME instead of XXX

Cleanup suggested by ether.
------------------------------------------------------------------------
r131361 | grosser | 2011-05-15 03:02:51 +0800 (Sun, 15 May 2011) | 1 line

www: Colorize TODO status
------------------------------------------------------------------------
r131360 | grosser | 2011-05-15 03:02:45 +0800 (Sun, 15 May 2011) | 1 line

CodeGeneration: Cleanup getAnalysis/addPreserved
------------------------------------------------------------------------
r131359 | grosser | 2011-05-15 03:02:39 +0800 (Sun, 15 May 2011) | 1 line

CodeGeneration: Localize variables
------------------------------------------------------------------------
r131358 | grosser | 2011-05-15 03:02:34 +0800 (Sun, 15 May 2011) | 3 lines

CodeGeneration: Admit that we change the code.

No need to pretend anymore that we do not update the LLVM-IR.
------------------------------------------------------------------------
r131357 | grosser | 2011-05-15 03:02:29 +0800 (Sun, 15 May 2011) | 1 line

Cloog: Export clast_root
------------------------------------------------------------------------
r131356 | grosser | 2011-05-15 03:02:21 +0800 (Sun, 15 May 2011) | 4 lines

CodeGeneration: No need to forget SCoP.

As we do not delete the SCoP, there is no need to remove it from the SCoP
detection.
------------------------------------------------------------------------
r131355 | grosser | 2011-05-15 03:02:12 +0800 (Sun, 15 May 2011) | 1 line

CodeGeneration: We do not preserve the PostDominatorTree
------------------------------------------------------------------------
r131354 | grosser | 2011-05-15 03:02:06 +0800 (Sun, 15 May 2011) | 4 lines

ScheduleOptimizer: Add an isl based schedule optimizer

The isl based routines implement a new interpretation of the Pluto algorithm
new interpretation. This patch requires a recent version of isl to be installed.
------------------------------------------------------------------------
r131353 | grosser | 2011-05-15 03:01:55 +0800 (Sun, 15 May 2011) | 4 lines

CodeGeneration: Remove -polly-codegen-only

If we only want to optimize a single function, we should extract this function
into a separate .ll file. This simplifies the code.
------------------------------------------------------------------------
r131352 | grosser | 2011-05-15 03:01:49 +0800 (Sun, 15 May 2011) | 4 lines

CodeGeneration: Do not delete the old version of the Scop.

Instead of deleting the old code, keep it on the side in an if-branch. It will
either be deleted by the dead code elimination or we can use it as fallback.
------------------------------------------------------------------------
r131351 | grosser | 2011-05-15 03:01:37 +0800 (Sun, 15 May 2011) | 1 line

CodeGeneration: Support only simple regions
------------------------------------------------------------------------
r131307 | grosser | 2011-05-14 04:51:45 +0800 (Sat, 14 May 2011) | 1 line

www: Update status of our move to the LLVM infrastructure
------------------------------------------------------------------------
r131247 | grosser | 2011-05-13 05:36:27 +0800 (Fri, 13 May 2011) | 1 line

www: Use german 'umlaut' in Simbuerger
------------------------------------------------------------------------
r131246 | grosser | 2011-05-13 05:33:28 +0800 (Fri, 13 May 2011) | 1 line

ScopDetection: Move implementation of function from header to .cpp file
------------------------------------------------------------------------
r131010 | grosser | 2011-05-07 03:52:19 +0800 (Sat, 07 May 2011) | 5 lines

ScopInfo: Do not return reference to member variable 'domain'.

Instead of returning a pointer to the domain, we return a new copy of it. This
is safer, as we do not give access to internal objects. It is also not
expensive, as isl will just increment a reference counter.
------------------------------------------------------------------------
r131009 | grosser | 2011-05-07 03:52:09 +0800 (Sat, 07 May 2011) | 1 line

Dependences: Add interface to retrieve dependences.
------------------------------------------------------------------------
r130975 | ether | 2011-05-06 10:38:20 +0800 (Fri, 06 May 2011) | 2 lines

ScopDetection: Remember the functions generated by backend in a pointer set, so we
  do not re-generate code for these functions.
------------------------------------------------------------------------
r130752 | ether | 2011-05-03 21:46:58 +0800 (Tue, 03 May 2011) | 1 line

Refactor: Move 'isParallelFor' from codegen backend to Dependences analysis, so other passes can also use it.
------------------------------------------------------------------------
r130751 | grosser | 2011-05-03 17:40:40 +0800 (Tue, 03 May 2011) | 1 line

www: Finish first draft of the matmul example
------------------------------------------------------------------------
r130689 | grosser | 2011-05-02 15:48:29 +0800 (Mon, 02 May 2011) | 7 lines

Add new website for Polly

Use the content of the Polly wiki page[1] to create a new website. I do not yet
plan to officially promote this website, but it is already a solid base that we
can improve and peer review.

[1] http://wiki.llvm.org/Polly
------------------------------------------------------------------------
r130586 | ether | 2011-04-30 11:26:51 +0800 (Sat, 30 Apr 2011) | 1 line

ScopInfo: Rememeber the induction variable and its parent loop at the same thime.
------------------------------------------------------------------------
r130575 | ether | 2011-04-30 10:47:34 +0800 (Sat, 30 Apr 2011) | 1 line

JSON: Do not use throw when exception is disabled.
------------------------------------------------------------------------
r130574 | ether | 2011-04-30 10:30:58 +0800 (Sat, 30 Apr 2011) | 1 line

JSON: Disable exception in JSON library, because exception is disable by by default.
------------------------------------------------------------------------
r130484 | simbuerg | 2011-04-29 15:54:20 +0800 (Fri, 29 Apr 2011) | 2 lines

Add e-mail to credits file.

------------------------------------------------------------------------
r130482 | ether | 2011-04-29 15:34:54 +0800 (Fri, 29 Apr 2011) | 1 line

Partial support test polly for out of tree build.
------------------------------------------------------------------------
r130481 | grosser | 2011-04-29 14:52:36 +0800 (Fri, 29 Apr 2011) | 1 line

JSONExport: Some cleanups
------------------------------------------------------------------------
r130480 | grosser | 2011-04-29 14:42:42 +0800 (Fri, 29 Apr 2011) | 1 line

CREDITS: Replace LLVM with Polly
------------------------------------------------------------------------
r130478 | grosser | 2011-04-29 14:29:20 +0800 (Fri, 29 Apr 2011) | 1 line

Add a converter from jscop to iscc input
------------------------------------------------------------------------
r130477 | grosser | 2011-04-29 14:27:09 +0800 (Fri, 29 Apr 2011) | 1 line

JSONExporter: Remove unused variable
------------------------------------------------------------------------
r130476 | grosser | 2011-04-29 14:27:02 +0800 (Fri, 29 Apr 2011) | 4 lines

Add initial version of Polly

This version is equivalent to commit ba26ebece8f5be84e9bd6315611d412af797147e
in the old git repository.
------------------------------------------------------------------------
r130389 | asl | 2011-04-28 15:28:28 +0800 (Thu, 28 Apr 2011) | 2 lines

Add BTT directory structure to polly

------------------------------------------------------------------------
